"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(n<3?i(s):n>3?i(t,r,s):i(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),signup_service_1=require("../shared/services/signup.service"),SignupComponent=function(){function e(e,t,r){this.router=e,this.route=t,this.signupService=r}return e.prototype.goToForm=function(e){this.router.navigate(["/signup",e])},e.prototype.checkStyle=function(e){return this.selectedRole===e},e.prototype.onSubmit=function(e){function t(e){console.log("res from backend",e),localStorage.setItem("id_token",JSON.stringify(e.token)),localStorage.setItem("current_user",JSON.stringify(e.user))}function r(e){"Conflict"===e.statusText&&console.log("this email already exist")}e.role=this.selectedRole;this.signupService.signUp(e).subscribe(function(e){return t(e)},function(e){return r(e)})},e.prototype.ngOnInit=function(){var e=this;this.selectedRole=void 0,this.route&&(this.sub=this.route.params.subscribe(function(t){switch(e.selectedRole=t.role,e.selectedRole){case"student":e.roleCh="学员";break;case"advisor":e.roleCh="顾问";break;case"admin":e.roleCh="管理员"}}))},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e=__decorate([core_1.Component({moduleId:module.id,selector:"signup",templateUrl:"signup.component.html",styleUrls:["signup.style.css"],providers:[signup_service_1.SignupService],directives:[router_1.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[router_1.Router,router_1.ActivatedRoute,signup_service_1.SignupService])],e)}();exports.SignupComponent=SignupComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC9zaWdudXAuY29tcG9uZW50LmpzIiwic2lnbnVwL3NpZ251cC5jb21wb25lbnQudHMiXSwibmFtZXMiOlsiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwicmVxdWlyZSIsInJvdXRlcl8xIiwic2lnbnVwX3NlcnZpY2VfMSIsIlNpZ251cENvbXBvbmVudCIsInJvdXRlciIsInJvdXRlIiwic2lnbnVwU2VydmljZSIsInByb3RvdHlwZSIsImdvVG9Gb3JtIiwic2VsZWN0ZWQiLCJuYXZpZ2F0ZSIsImNoZWNrU3R5bGUiLCJzZWxlY3RlZFJvbGUiLCJvblN1Ym1pdCIsImF1dGgiLCJoYW5kbGVSZXNwb25zZSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInRva2VuIiwidXNlciIsImhhbmRsZUVycm9yIiwiZXJyIiwic3RhdHVzVGV4dCIsInJvbGUiLCJzaWduVXAiLCJzdWJzY3JpYmUiLCJuZ09uSW5pdCIsIl90aGlzIiwidW5kZWZpbmVkIiwic3ViIiwicGFyYW1zIiwicm9sZUNoIiwibmdPbkRlc3Ryb3kiLCJ1bnN1YnNjcmliZSIsIkNvbXBvbmVudCIsIm1vZHVsZUlkIiwibW9kdWxlIiwiaWQiLCJzZWxlY3RvciIsInRlbXBsYXRlVXJsIiwic3R5bGVVcmxzIiwicHJvdmlkZXJzIiwiU2lnbnVwU2VydmljZSIsImRpcmVjdGl2ZXMiLCJST1VURVJfRElSRUNUSVZFUyIsIlJvdXRlciIsIkFjdGl2YXRlZFJvdXRlIiwiZXhwb3J0cyJdLCJtYXBw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cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xufTtcbnZhciBjb3JlXzEgPSByZXF1aXJlKCdAYW5ndWxhci9jb3JlJyk7XG52YXIgcm91dGVyXzEgPSByZXF1aXJlKCdAYW5ndWxhci9yb3V0ZXInKTtcbnZhciBzaWdudXBfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vc2hhcmVkL3NlcnZpY2VzL3NpZ251cC5zZXJ2aWNlJyk7XG52YXIgU2lnbnVwQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaWdudXBDb21wb25lbnQocm91dGVyLCByb3V0ZSwgc2lnbnVwU2VydmljZSkge1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5yb3V0ZSA9IHJvdXRlO1xuICAgICAgICB0aGlzLnNpZ251cFNlcnZpY2UgPSBzaWdudXBTZXJ2aWNlO1xuICAgIH1cbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLmdvVG9Gb3JtID0gZnVuY3Rpb24gKHNlbGVjdGVkKSB7XG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL3NpZ251cCcsIHNlbGVjdGVkXSk7XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLmNoZWNrU3R5bGUgPSBmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb2xlID09PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2lnbnVwQ29tcG9uZW50LnByb3RvdHlwZS5vblN1Ym1pdCA9IGZ1bmN0aW9uIChhdXRoKSB7XG4gICAgICAgIGF1dGgucm9sZSA9IHRoaXMuc2VsZWN0ZWRSb2xlO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2lnbnVwU2VydmljZS5zaWduVXAoYXV0aClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gaGFuZGxlUmVzcG9uc2UocmVzKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gaGFuZGxlRXJyb3IoZXJyKTsgfSk7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcyBmcm9tIGJhY2tlbmQnLCByZXMpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgSlNPTi5zdHJpbmdpZnkocmVzLnRva2VuKSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudF91c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzLnVzZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIuc3RhdHVzVGV4dCA9PT0gJ0NvbmZsaWN0Jykge1xuICAgICAgICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZ251cENvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5yb3V0ZSkge1xuICAgICAgICAgICAgdGhpcy5zdWIgPSB0aGlzLnJvdXRlXG4gICAgICAgICAgICAgICAgLnBhcmFtc1xuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdGVkUm9sZSA9IHBhcmFtc1sncm9sZSddO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX3RoaXMuc2VsZWN0ZWRSb2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0dWRlbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9sZUNoID0gJ+WtpuWRmCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWR2aXNvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2xlQ2ggPSAn6aG+6ZeuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhZG1pbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2xlQ2ggPSAn566h55CG5ZGYJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN1Yi51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU2lnbnVwQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xuICAgICAgICAgICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnc2lnbnVwJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwLmNvbXBvbmVudC5odG1sJyxcbiAgICAgICAgICAgIHN0eWxlVXJsczogWydzaWdudXAuc3R5bGUuY3NzJ10sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtzaWdudXBfc2VydmljZV8xLlNpZ251cFNlcnZpY2VdLFxuICAgICAgICAgICAgZGlyZWN0aXZlczogW3JvdXRlcl8xLlJPVVRFUl9ESVJFQ1RJVkVTXVxuICAgICAgICB9KSwgXG4gICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW3JvdXRlcl8xLlJvdXRlciwgcm91dGVyXzEuQWN0aXZhdGVkUm91dGUsIHNpZ251cF9zZXJ2aWNlXzEuU2lnbnVwU2VydmljZV0pXG4gICAgXSwgU2lnbnVwQ29tcG9uZW50KTtcbiAgICByZXR1cm4gU2lnbnVwQ29tcG9uZW50O1xufSgpKTtcbmV4cG9ydHMuU2lnbnVwQ29tcG9uZW50ID0gU2lnbnVwQ29tcG9uZW50O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyLCBBY3RpdmF0ZWRSb3V0ZSwgUk9VVEVSX0RJUkVDVElWRVMgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgTmdDbGFzcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBTaWdudXBTZXJ2aWNlIH0gZnJvbSAnLi4vc2hhcmVkL3NlcnZpY2VzL3NpZ251cC5zZXJ2aWNlJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi9zaGFyZWQvdHlwZXMvYXV0aCc7XG5cbkBDb21wb25lbnQoe1xuICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgc2VsZWN0b3I6ICdzaWdudXAnLFxuICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnc2lnbnVwLnN0eWxlLmNzcyddLFxuICAgIHByb3ZpZGVyczogW1NpZ251cFNlcnZpY2VdLFxuICAgIGRpcmVjdGl2ZXM6IFtST1VURVJfRElSRUNUSVZFU11cblxufSlcblxuZXhwb3J0IGNsYXNzIFNpZ251cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cdCAgcHJpdmF0ZSBzZWxlY3RlZFJvbGU6IHN0cmluZztcbiAgICBwcml2YXRlIHN1YjogYW55O1xuICAgIHByaXZhdGUgcm9sZUNoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICBcdHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgICBwcml2YXRlIHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcbiAgICAgIHByaXZhdGUgc2lnbnVwU2VydmljZTogU2lnbnVwU2VydmljZVxuICAgICkgeyB9XG5cbiAgICBnb1RvRm9ybShzZWxlY3RlZDogc3RyaW5nKSB7ICBcbiAgICBcdHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL3NpZ251cCcsIHNlbGVjdGVkXSk7XG4gIFx0fVxuXG4gICAgY2hlY2tTdHlsZShzZWxlY3RlZDogc3RyaW5nKSB7XG4gICAgICBpZih0aGlzLnNlbGVjdGVkUm9sZSA9PT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgb25TdWJtaXQoYXV0aDogQXV0aCkge1xuICAgICAgYXV0aC5yb2xlID0gdGhpcy5zZWxlY3RlZFJvbGU7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2lnbnVwU2VydmljZS5zaWduVXAoYXV0aClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICByZXMgPT4gaGFuZGxlUmVzcG9uc2UocmVzKSxcbiAgICAgICAgICAgIGVyciA9PiBoYW5kbGVFcnJvcihlcnIpXG4gICAgICAgICAgICApXG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMgZnJvbSBiYWNrZW5kJywgcmVzKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCBKU09OLnN0cmluZ2lmeShyZXMudG9rZW4pKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudF91c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzLnVzZXIpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyKSB7XG4gICAgICAgIGlmKGVyci5zdGF0dXNUZXh0ID09PSAnQ29uZmxpY3QnKSB7XG4gICAgICAgICAgLy9MZXQgdXNlciBrbm93IHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdFxuICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3QnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUm9sZSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmKHRoaXMucm91dGUpIHtcbiAgICAgICAgdGhpcy5zdWIgPSB0aGlzLnJvdXRlXG4gICAgICAgIC5wYXJhbXNcbiAgICAgICAgLnN1YnNjcmliZShwYXJhbXMgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlID0gcGFyYW1zWydyb2xlJ107XG4gICAgICAgICAgc3dpdGNoKHRoaXMuc2VsZWN0ZWRSb2xlKSB7XG4gICAgICAgICAgICBjYXNlICdzdHVkZW50JzpcbiAgICAgICAgICAgICAgdGhpcy5yb2xlQ2ggPSAn5a2m5ZGYJztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhZHZpc29yJzpcbiAgICAgICAgICAgICAgdGhpcy5yb2xlQ2ggPSAn6aG+6ZeuJztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhZG1pbic6XG4gICAgICAgICAgICAgIHRoaXMucm9sZUNoID0gJ+euoeeQhuWRmCc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICB0aGlzLnN1Yi51bnN1YnNjcmliZSgpO1xuICAgIH1cbn0gIFxuXHQiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
