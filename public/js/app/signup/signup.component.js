"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var s,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),auth_service_1=require("../shared/services/auth.service"),SignupComponent=function(){function e(e,t,r){this.router=e,this.route=t,this.authService=r}return e.prototype.goToForm=function(e){this.confirmPassword=null,this.pwMsgSuccess=!1,this.pwMsgFail=!1,this.router.navigate(["/signup",e])},e.prototype.checkStyle=function(e){return this.selectedRole===e},e.prototype.checkPw=function(e,t){this.pwMsgSuccess=!1,this.pwMsgFail=!1,e.password&&t&&(e.password===t?this.pwMsgSuccess=!0:this.pwMsgFail=!0)},e.prototype.onSubmit=function(e){function t(e){console.log(e),localStorage.setItem("id_token",JSON.stringify(e.token)),localStorage.setItem("current_user",JSON.stringify(e.user)),o.router.navigate(["dashboard"])}function r(e){"Conflict"===e.statusText&&(console.log("this email already exist"),console.log(e))}var o=this;e.password===this.confirmPassword&&(delete e.confirmPassword,e.role=this.selectedRole,this.authService.signUp(e).subscribe(function(e){return t(e)},function(e){return r(e)}))},e.prototype.ngOnInit=function(){var e=this;this.selectedRole=void 0,this.route&&(this.sub=this.route.params.subscribe(function(t){switch(e.selectedRole=t.role,e.selectedRole){case"student":e.roleCh="Student";break;case"advisor":e.roleCh="Advisor";break;case"admin":e.roleCh="Admin"}}))},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e=__decorate([core_1.Component({moduleId:module.id,selector:"signup",templateUrl:"signup.component.html",styleUrls:["../shared/scss/partial/auth.css"],providers:[auth_service_1.AuthService],directives:[router_1.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[router_1.Router,router_1.ActivatedRoute,auth_service_1.AuthService])],e)}();exports.SignupComponent=SignupComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC9zaWdudXAuY29tcG9uZW50LmpzIiwic2lnbnVwL3NpZ251cC5jb21wb25lbnQudHMiXSwibmFtZXMiOlsiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwicmVxdWlyZSIsInJvdXRlcl8xIiwiYXV0aF9zZXJ2aWNlXzEiLCJTaWdudXBDb21wb25lbnQiLCJyb3V0ZXIiLCJyb3V0ZSIsImF1dGhTZXJ2aWNlIiwicHJvdG90eXBlIiwiZ29Ub0Zvcm0iLCJzZWxlY3RlZCIsImNvbmZpcm1QYXNzd29yZCIsInB3TXNnU3VjY2VzcyIsInB3TXNnRmFpbCIsIm5hdmlnYXRlIiwiY2hlY2tTdHlsZSIsInNlbGVjdGVkUm9sZSIsImNoZWNrUHciLCJhdXRoIiwiY29uZmlybVB3IiwicGFzc3dvcmQiLCJvblN1Ym1pdCIsImhhbmRsZVJlc3BvbnNlIiwicmVzIiwiY29uc29sZSIsImxvZyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwidG9rZW4iLCJ1c2VyIiwic2VsZiIsImhhbmRsZUVycm9yIiwiZXJyIiwic3RhdHVzVGV4dCIsInJvbGUiLCJzaWduVXAiLCJzdWJzY3JpYmUiLCJuZ09uSW5pdCIsIl90aGlzIiwidW5kZWZpbmVkIiwic3ViIiwicGFyYW1zIiwicm9sZUNoIiwibmdPbkRlc3Ryb3kiLCJ1bnN1YnNjcmliZSIsIkNvbXBvbmVudCIsIm1vZHVsZUlkIiwibW9kdWxlIiwiaWQiLCJzZWxlY3RvciIsInRlbXBsYXRlVXJsIiwic3R5bGVVcmxzIiwicHJvdmlkZXJzIiwiQXV0aFNlcnZpY2UiLCJkaXJlY3RpdmVzIiwiUk9VVEVSX0RJUkVDVElWRVMiLCJSb3V0ZXIiLCJBY3RpdmF0ZWRSb3V0ZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBQ0EsSUFBSUEsWUFBY0MsTUFBUUEsS0FBS0QsWUFBZSxTQUFVRSxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQUtILEVBQUksRUFBSUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFLTSxHQUFLSixFQUFFSCxFQUFRQyxLQUFTTSxFQUNoSixPQUFPSCxHQUFJLEdBQUtHLEdBQUtDLE9BQU9LLGVBQWViLEVBQVFDLEVBQUtNLEdBQUlBLEdBRTVETyxXQUFjaEIsTUFBUUEsS0FBS2dCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpOLFVBQW9ELGtCQUFyQkEsU0FBUU8sU0FBeUIsTUFBT1AsU0FBUU8sU0FBU0YsRUFBR0MsSUNSMUdFLE9BQUFDLFFBQTZDLGlCQUM3Q0MsU0FBQUQsUUFBMEQsbUJBRzFERSxlQUFBRixRQUE0QixtQ0FZNUJHLGdCQUFBLFdBU0ksUUFBQUEsR0FDU0MsRUFDQ0MsRUFDQUMsR0FGRDNCLEtBQUF5QixPQUFBQSxFQUNDekIsS0FBQTBCLE1BQUFBLEVBQ0ExQixLQUFBMkIsWUFBQUEsRUErRmQsTUE1RklILEdBQUFJLFVBQUFDLFNBQUEsU0FBU0MsR0FFUDlCLEtBQUsrQixnQkFBa0IsS0FDdkIvQixLQUFLZ0MsY0FBZSxFQUNwQmhDLEtBQUtpQyxXQUFZLEVBQ2xCakMsS0FBS3lCLE9BQU9TLFVBQVUsVUFBV0osS0FHbENOLEVBQUFJLFVBQUFPLFdBQUEsU0FBV0wsR0FDVCxNQUFHOUIsTUFBS29DLGVBQWlCTixHQU0zQk4sRUFBQUksVUFBQVMsUUFBQSxTQUFRQyxFQUFZQyxHQUNsQnZDLEtBQUtnQyxjQUFlLEVBQ3BCaEMsS0FBS2lDLFdBQVksRUFFZEssRUFBS0UsVUFBWUQsSUFFYkQsRUFBS0UsV0FBYUQsRUFFbkJ2QyxLQUFLZ0MsY0FBZSxFQUlwQmhDLEtBQUtpQyxXQUFZLElBTXpCVCxFQUFBSSxVQUFBYSxTQUFBLFNBQVNILEdBZVAsUUFBQUksR0FBd0JDLEdBQ3BCQyxRQUFRQyxJQUFJRixHQUNaRyxhQUFhQyxRQUFRLFdBQVlDLEtBQUtDLFVBQVVOLEVBQUlPLFFBQ3BESixhQUFhQyxRQUFRLGVBQWdCQyxLQUFLQyxVQUFVTixFQUFJUSxPQUN4REMsRUFBSzNCLE9BQU9TLFVBQVUsY0FHMUIsUUFBQW1CLEdBQXFCQyxHQUNHLGFBQW5CQSxFQUFJQyxhQUVMWCxRQUFRQyxJQUFJLDRCQUNaRCxRQUFRQyxJQUFJUyxJQXpCaEIsR0FBSUYsR0FBT3BELElBR1JzQyxHQUFLRSxXQUFheEMsS0FBSytCLHdCQUVqQk8sR0FBS1AsZ0JBQ1pPLEVBQUtrQixLQUFPeEQsS0FBS29DLGFBQ2pCcEMsS0FBSzJCLFlBQVk4QixPQUFPbkIsR0FDbkJvQixVQUNELFNBQUFmLEdBQU8sTUFBQUQsR0FBZUMsSUFDdEIsU0FBQVcsR0FBTyxNQUFBRCxHQUFZQyxPQXFCM0I5QixFQUFBSSxVQUFBK0IsU0FBQSxXQUFBLEdBQUFDLEdBQUE1RCxJQUNFQSxNQUFLb0MsYUFBZXlCLE9BQ2pCN0QsS0FBSzBCLFFBQ04xQixLQUFLOEQsSUFBTTlELEtBQUswQixNQUNmcUMsT0FDQUwsVUFBVSxTQUFBSyxHQUVULE9BREFILEVBQUt4QixhQUFlMkIsRUFBYSxLQUMxQkgsRUFBS3hCLGNBQ1YsSUFBSyxVQUNId0IsRUFBS0ksT0FBUyxTQUNkLE1BQ0YsS0FBSyxVQUNISixFQUFLSSxPQUFTLFNBQ2QsTUFDRixLQUFLLFFBQ0hKLEVBQUtJLE9BQVMsYUFPeEJ4QyxFQUFBSSxVQUFBcUMsWUFBQSxXQUNLakUsS0FBSzhELEtBQ045RCxLQUFLOEQsSUFBSUksZUFqSGpCMUMsRUFBQXpCLFlBQUNxQixPQUFBK0MsV0FDR0MsU0FBVUMsT0FBT0MsR0FDakJDLFNBQVUsU0FDVkMsWUFBYSx3QkFDYkMsV0FBWSxtQ0FDWkMsV0FBWW5ELGVBQUFvRCxhQUNaQyxZQUFhdEQsU0FBQXVELHFCRCtGVDdELFdBQVcscUJBQXNCTSxTQUFTd0QsT0FBUXhELFNBQVN5RCxlQUFnQnhELGVBQWVvRCxlQUMzRm5ELEtDN0ZNd0QsU0FBQXhELGdCQUFlQSIsImZpbGUiOiJzaWdudXAvc2lnbnVwLmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xufTtcbnZhciBjb3JlXzEgPSByZXF1aXJlKCdAYW5ndWxhci9jb3JlJyk7XG52YXIgcm91dGVyXzEgPSByZXF1aXJlKCdAYW5ndWxhci9yb3V0ZXInKTtcbnZhciBhdXRoX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL3NoYXJlZC9zZXJ2aWNlcy9hdXRoLnNlcnZpY2UnKTtcbnZhciBTaWdudXBDb21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNpZ251cENvbXBvbmVudChyb3V0ZXIsIHJvdXRlLCBhdXRoU2VydmljZSkge1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5yb3V0ZSA9IHJvdXRlO1xuICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlID0gYXV0aFNlcnZpY2U7XG4gICAgfVxuICAgIFNpZ251cENvbXBvbmVudC5wcm90b3R5cGUuZ29Ub0Zvcm0gPSBmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgLy8gcm91dGUgdG8gIy9zaWdudXAvOnBhcmFtc1xuICAgICAgICB0aGlzLmNvbmZpcm1QYXNzd29yZCA9IG51bGw7XG4gICAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHdNc2dGYWlsID0gZmFsc2U7XG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL3NpZ251cCcsIHNlbGVjdGVkXSk7XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLmNoZWNrU3R5bGUgPSBmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb2xlID09PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2lnbnVwQ29tcG9uZW50LnByb3RvdHlwZS5jaGVja1B3ID0gZnVuY3Rpb24gKGF1dGgsIGNvbmZpcm1Qdykge1xuICAgICAgICB0aGlzLnB3TXNnU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnB3TXNnRmFpbCA9IGZhbHNlO1xuICAgICAgICAvL09ubHkgY2hlY2sgaWYgdGhlcmUncyBwdyBhbmQgaGFzIHNhbWUgbGVuZ3RoXG4gICAgICAgIGlmIChhdXRoLnBhc3N3b3JkICYmIGNvbmZpcm1Qdykge1xuICAgICAgICAgICAgLy8gaWYoYXV0aC5wYXNzd29yZC5sZW5ndGggPT09IGNvbmZpcm1Qdy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChhdXRoLnBhc3N3b3JkID09PSBjb25maXJtUHcpIHtcbiAgICAgICAgICAgICAgICAvL0xldCB1c2VyIGtub3cgdGhhdCB0aGUgcHcgbWF0Y2hlc1xuICAgICAgICAgICAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGF0IHRoZSBwdyBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgICAgICAgdGhpcy5wd01zZ0ZhaWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLm9uU3VibWl0ID0gZnVuY3Rpb24gKGF1dGgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvL1BXIGNoZWNraW5nXG4gICAgICAgIGlmIChhdXRoLnBhc3N3b3JkID09PSB0aGlzLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICAgICAgLy9Eb24ndCBzZW5kIGNvbmZpcm0gcGFzc3dvcmQgdG8gdGhlIGJhY2tlbmRcbiAgICAgICAgICAgIGRlbGV0ZSBhdXRoLmNvbmZpcm1QYXNzd29yZDtcbiAgICAgICAgICAgIGF1dGgucm9sZSA9IHRoaXMuc2VsZWN0ZWRSb2xlO1xuICAgICAgICAgICAgdGhpcy5hdXRoU2VydmljZS5zaWduVXAoYXV0aClcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIGhhbmRsZVJlc3BvbnNlKHJlcyk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGhhbmRsZUVycm9yKGVycik7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIEpTT04uc3RyaW5naWZ5KHJlcy50b2tlbikpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRfdXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcy51c2VyKSk7XG4gICAgICAgICAgICBzZWxmLnJvdXRlci5uYXZpZ2F0ZShbJ2Rhc2hib2FyZCddKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIuc3RhdHVzVGV4dCA9PT0gJ0NvbmZsaWN0Jykge1xuICAgICAgICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0Jyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07IC8vRW5kIG9mIG9uIHN1Ym1pdFxuICAgIFNpZ251cENvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5yb3V0ZSkge1xuICAgICAgICAgICAgdGhpcy5zdWIgPSB0aGlzLnJvdXRlXG4gICAgICAgICAgICAgICAgLnBhcmFtc1xuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdGVkUm9sZSA9IHBhcmFtc1sncm9sZSddO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX3RoaXMuc2VsZWN0ZWRSb2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0dWRlbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9sZUNoID0gJ1N0dWRlbnQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Fkdmlzb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9sZUNoID0gJ0Fkdmlzb3InO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkbWluJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvbGVDaCA9ICdBZG1pbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2lnbnVwQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3ViKSB7XG4gICAgICAgICAgICB0aGlzLnN1Yi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XG4gICAgICAgICAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgICAgICAgICAgc2VsZWN0b3I6ICdzaWdudXAnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWdudXAuY29tcG9uZW50Lmh0bWwnLFxuICAgICAgICAgICAgc3R5bGVVcmxzOiBbJy4uL3NoYXJlZC9zY3NzL3BhcnRpYWwvYXV0aC5jc3MnXSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW2F1dGhfc2VydmljZV8xLkF1dGhTZXJ2aWNlXSxcbiAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtyb3V0ZXJfMS5ST1VURVJfRElSRUNUSVZFU11cbiAgICAgICAgfSksIFxuICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIHJvdXRlcl8xLkFjdGl2YXRlZFJvdXRlLCBhdXRoX3NlcnZpY2VfMS5BdXRoU2VydmljZV0pXG4gICAgXSwgU2lnbnVwQ29tcG9uZW50KTtcbiAgICByZXR1cm4gU2lnbnVwQ29tcG9uZW50O1xufSgpKTtcbmV4cG9ydHMuU2lnbnVwQ29tcG9uZW50ID0gU2lnbnVwQ29tcG9uZW50O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyLCBBY3RpdmF0ZWRSb3V0ZSwgUk9VVEVSX0RJUkVDVElWRVMgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgTmdDbGFzcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IEF1dGhTZXJ2aWNlIH0gZnJvbSAnLi4vc2hhcmVkL3NlcnZpY2VzL2F1dGguc2VydmljZSc7XG5pbXBvcnQgeyBBdXRoIH0gZnJvbSAnLi4vc2hhcmVkL3R5cGVzL2F1dGgnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHNlbGVjdG9yOiAnc2lnbnVwJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3NpZ251cC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4uL3NoYXJlZC9zY3NzL3BhcnRpYWwvYXV0aC5jc3MnXSxcbiAgICBwcm92aWRlcnM6IFtBdXRoU2VydmljZV0sXG4gICAgZGlyZWN0aXZlczogW1JPVVRFUl9ESVJFQ1RJVkVTXVxufSlcblxuZXhwb3J0IGNsYXNzIFNpZ251cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cdCAgcHJpdmF0ZSBzZWxlY3RlZFJvbGU6IHN0cmluZztcbiAgICBwcml2YXRlIHN1YjogYW55O1xuICAgIHByaXZhdGUgcm9sZUNoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjb25maXJtUGFzc3dvcmQ6IHN0cmluZztcbiAgICBwcml2YXRlIHB3TXNnU3VjY2VzczogYm9vbGVhbjtcbiAgICBwcml2YXRlIHB3TXNnRmFpbDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGxvZ01lc3NhZ2U6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgIFx0cHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICAgIHByaXZhdGUgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgICAgcHJpdmF0ZSBhdXRoU2VydmljZTogQXV0aFNlcnZpY2VcbiAgICApIHsgfVxuXG4gICAgZ29Ub0Zvcm0oc2VsZWN0ZWQ6IHN0cmluZykge1xuICAgICAgLy8gcm91dGUgdG8gIy9zaWdudXAvOnBhcmFtc1xuICAgICAgdGhpcy5jb25maXJtUGFzc3dvcmQgPSBudWxsO1xuICAgICAgdGhpcy5wd01zZ1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgIHRoaXMucHdNc2dGYWlsID0gZmFsc2U7XG4gICAgXHR0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9zaWdudXAnLCBzZWxlY3RlZF0pO1xuICBcdH1cblxuICAgIGNoZWNrU3R5bGUoc2VsZWN0ZWQ6IHN0cmluZykge1xuICAgICAgaWYodGhpcy5zZWxlY3RlZFJvbGUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNoZWNrUHcoYXV0aDogQXV0aCwgY29uZmlybVB3OiBzdHJpbmcpIHtcbiAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLnB3TXNnRmFpbCA9IGZhbHNlO1xuICAgICAgLy9Pbmx5IGNoZWNrIGlmIHRoZXJlJ3MgcHcgYW5kIGhhcyBzYW1lIGxlbmd0aFxuICAgICAgaWYoYXV0aC5wYXNzd29yZCAmJiBjb25maXJtUHcpIHtcbiAgICAgICAgLy8gaWYoYXV0aC5wYXNzd29yZC5sZW5ndGggPT09IGNvbmZpcm1Qdy5sZW5ndGgpIHtcbiAgICAgICAgICBpZihhdXRoLnBhc3N3b3JkID09PSBjb25maXJtUHcpIHtcbiAgICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGF0IHRoZSBwdyBtYXRjaGVzXG4gICAgICAgICAgICB0aGlzLnB3TXNnU3VjY2VzcyA9IHRydWU7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9MZXQgdXNlciBrbm93IHRoYXQgdGhlIHB3IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICAgIHRoaXMucHdNc2dGYWlsID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIC8vIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvblN1Ym1pdChhdXRoOiBBdXRoKSB7XG4gICAgICBsZXQgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vUFcgY2hlY2tpbmdcbiAgICAgIGlmKGF1dGgucGFzc3dvcmQgPT09IHRoaXMuY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIC8vRG9uJ3Qgc2VuZCBjb25maXJtIHBhc3N3b3JkIHRvIHRoZSBiYWNrZW5kXG4gICAgICAgIGRlbGV0ZSBhdXRoLmNvbmZpcm1QYXNzd29yZDtcbiAgICAgICAgYXV0aC5yb2xlID0gdGhpcy5zZWxlY3RlZFJvbGU7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2Uuc2lnblVwKGF1dGgpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgcmVzID0+IGhhbmRsZVJlc3BvbnNlKHJlcyksXG4gICAgICAgICAgICBlcnIgPT4gaGFuZGxlRXJyb3IoZXJyKVxuICAgICAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIEpTT04uc3RyaW5naWZ5KHJlcy50b2tlbikpO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50X3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXMudXNlcikpO1xuICAgICAgICAgIHNlbGYucm91dGVyLm5hdmlnYXRlKFsnZGFzaGJvYXJkJ10pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHtcbiAgICAgICAgaWYoZXJyLnN0YXR1c1RleHQgPT09ICdDb25mbGljdCcpIHtcbiAgICAgICAgICAvL0xldCB1c2VyIGtub3cgdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0XG4gICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgZW1haWwgYWxyZWFkeSBleGlzdCcpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgLy8gc2VsZi5sb2dNZXNzYWdlID0gSlNPTi5wYXJzZShlcnIuX2JvZHkpLmVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfS8vRW5kIG9mIG9uIHN1Ym1pdFxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUm9sZSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmKHRoaXMucm91dGUpIHtcbiAgICAgICAgdGhpcy5zdWIgPSB0aGlzLnJvdXRlXG4gICAgICAgIC5wYXJhbXNcbiAgICAgICAgLnN1YnNjcmliZShwYXJhbXMgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlID0gcGFyYW1zWydyb2xlJ107XG4gICAgICAgICAgc3dpdGNoKHRoaXMuc2VsZWN0ZWRSb2xlKSB7XG4gICAgICAgICAgICBjYXNlICdzdHVkZW50JzpcbiAgICAgICAgICAgICAgdGhpcy5yb2xlQ2ggPSAnU3R1ZGVudCc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWR2aXNvcic6XG4gICAgICAgICAgICAgIHRoaXMucm9sZUNoID0gJ0Fkdmlzb3InO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FkbWluJzpcbiAgICAgICAgICAgICAgdGhpcy5yb2xlQ2ggPSAnQWRtaW4nO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgaWYodGhpcy5zdWIpe1xuICAgICAgICB0aGlzLnN1Yi51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH1cbn0gIFxuXHQiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
