"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var s,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),auth_service_1=require("../shared/services/auth.service"),SignupComponent=function(){function e(e,t,r){this.router=e,this.route=t,this.authService=r}return e.prototype.goToForm=function(e){this.confirmPassword=null,this.pwMsgSuccess=!1,this.pwMsgFail=!1,this.router.navigate(["/signup",e])},e.prototype.checkStyle=function(e){return this.selectedRole===e},e.prototype.checkPw=function(e,t){this.pwMsgSuccess=!1,this.pwMsgFail=!1,e.password&&t&&(e.password===t?this.pwMsgSuccess=!0:this.pwMsgFail=!0)},e.prototype.onSubmit=function(e){function t(e){console.log(e),localStorage.setItem("id_token",JSON.stringify(e.token)),localStorage.setItem("current_user",JSON.stringify(e.user)),o.router.navigate(["dashboard"])}function r(e){"Conflict"===e.statusText&&(console.log("this email already exist"),console.log(e))}var o=this;e.password===this.confirmPassword&&(delete e.confirmPassword,e.role=this.selectedRole,this.authService.signUp(e).subscribe(function(e){return t(e)},function(e){return r(e)}))},e.prototype.ngOnInit=function(){var e=this;this.selectedRole=void 0,this.route&&(this.sub=this.route.params.subscribe(function(t){switch(e.selectedRole=t.role,e.selectedRole){case"student":e.roleCh="Student";break;case"advisor":e.roleCh="Advisor";break;case"supervisor":e.roleCh="Supervisor";break;case"admin":e.roleCh="Admin";break;case"superadmin":e.roleCh="Superadmin"}}))},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e=__decorate([core_1.Component({moduleId:module.id,selector:"signup",templateUrl:"signup.component.html",styleUrls:["../shared/scss/partial/auth.css"],providers:[auth_service_1.AuthService],directives:[router_1.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[router_1.Router,router_1.ActivatedRoute,auth_service_1.AuthService])],e)}();exports.SignupComponent=SignupComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC9zaWdudXAuY29tcG9uZW50LmpzIiwic2lnbnVwL3NpZ251cC5jb21wb25lbnQudHMiXSwibmFtZXMiOlsiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwicmVxdWlyZSIsInJvdXRlcl8xIiwiYXV0aF9zZXJ2aWNlXzEiLCJTaWdudXBDb21wb25lbnQiLCJyb3V0ZXIiLCJyb3V0ZSIsImF1dGhTZXJ2aWNlIiwicHJvdG90eXBlIiwiZ29Ub0Zvcm0iLCJzZWxlY3RlZCIsImNvbmZpcm1QYXNzd29yZCIsInB3TXNnU3VjY2VzcyIsInB3TXNnRmFpbCIsIm5hdmlnYXRlIiwiY2hlY2tTdHlsZSIsInNlbGVjdGVkUm9sZSIsImNoZWNrUHciLCJhdXRoIiwiY29uZmlybVB3IiwicGFzc3dvcmQiLCJvblN1Ym1pdCIsImhhbmRsZVJlc3BvbnNlIiwicmVzIiwiY29uc29sZSIsImxvZyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwidG9rZW4iLCJ1c2VyIiwic2VsZiIsImhhbmRsZUVycm9yIiwiZXJyIiwic3RhdHVzVGV4dCIsInJvbGUiLCJzaWduVXAiLCJzdWJzY3JpYmUiLCJuZ09uSW5pdCIsIl90aGlzIiwidW5kZWZpbmVkIiwic3ViIiwicGFyYW1zIiwicm9sZUNoIiwibmdPbkRlc3Ryb3kiLCJ1bnN1YnNjcmliZSIsIkNvbXBvbmVudCIsIm1vZHVsZUlkIiwibW9kdWxlIiwiaWQiLCJzZWxlY3RvciIsInRlbXBsYXRlVXJsIiwic3R5bGVVcmxzIiwicHJvdmlkZXJzIiwiQXV0aFNlcnZpY2UiLCJkaXJlY3RpdmVzIiwiUk9VVEVSX0RJUkVDVElWRVMiLCJSb3V0ZXIiLCJBY3RpdmF0ZWRSb3V0ZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBQ0EsSUFBSUEsWUFBY0MsTUFBUUEsS0FBS0QsWUFBZSxTQUFVRSxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQUtILEVBQUksRUFBSUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFLTSxHQUFLSixFQUFFSCxFQUFRQyxLQUFTTSxFQUNoSixPQUFPSCxHQUFJLEdBQUtHLEdBQUtDLE9BQU9LLGVBQWViLEVBQVFDLEVBQUtNLEdBQUlBLEdBRTVETyxXQUFjaEIsTUFBUUEsS0FBS2dCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpOLFVBQW9ELGtCQUFyQkEsU0FBUU8sU0FBeUIsTUFBT1AsU0FBUU8sU0FBU0YsRUFBR0MsSUNSMUdFLE9BQUFDLFFBQTZDLGlCQUM3Q0MsU0FBQUQsUUFBMEQsbUJBRzFERSxlQUFBRixRQUE0QixtQ0FZNUJHLGdCQUFBLFdBU0ksUUFBQUEsR0FDU0MsRUFDQ0MsRUFDQUMsR0FGRDNCLEtBQUF5QixPQUFBQSxFQUNDekIsS0FBQTBCLE1BQUFBLEVBQ0ExQixLQUFBMkIsWUFBQUEsRUFxR2QsTUFsR0lILEdBQUFJLFVBQUFDLFNBQUEsU0FBU0MsR0FFUDlCLEtBQUsrQixnQkFBa0IsS0FDdkIvQixLQUFLZ0MsY0FBZSxFQUNwQmhDLEtBQUtpQyxXQUFZLEVBQ2xCakMsS0FBS3lCLE9BQU9TLFVBQVUsVUFBV0osS0FHbENOLEVBQUFJLFVBQUFPLFdBQUEsU0FBV0wsR0FDVCxNQUFHOUIsTUFBS29DLGVBQWlCTixHQU0zQk4sRUFBQUksVUFBQVMsUUFBQSxTQUFRQyxFQUFZQyxHQUNsQnZDLEtBQUtnQyxjQUFlLEVBQ3BCaEMsS0FBS2lDLFdBQVksRUFFZEssRUFBS0UsVUFBWUQsSUFFYkQsRUFBS0UsV0FBYUQsRUFFbkJ2QyxLQUFLZ0MsY0FBZSxFQUlwQmhDLEtBQUtpQyxXQUFZLElBTXpCVCxFQUFBSSxVQUFBYSxTQUFBLFNBQVNILEdBZVAsUUFBQUksR0FBd0JDLEdBQ3BCQyxRQUFRQyxJQUFJRixHQUNaRyxhQUFhQyxRQUFRLFdBQVlDLEtBQUtDLFVBQVVOLEVBQUlPLFFBQ3BESixhQUFhQyxRQUFRLGVBQWdCQyxLQUFLQyxVQUFVTixFQUFJUSxPQUN4REMsRUFBSzNCLE9BQU9TLFVBQVUsY0FHMUIsUUFBQW1CLEdBQXFCQyxHQUNHLGFBQW5CQSxFQUFJQyxhQUVMWCxRQUFRQyxJQUFJLDRCQUNaRCxRQUFRQyxJQUFJUyxJQXpCaEIsR0FBSUYsR0FBT3BELElBR1JzQyxHQUFLRSxXQUFheEMsS0FBSytCLHdCQUVqQk8sR0FBS1AsZ0JBQ1pPLEVBQUtrQixLQUFPeEQsS0FBS29DLGFBQ2pCcEMsS0FBSzJCLFlBQVk4QixPQUFPbkIsR0FDbkJvQixVQUNELFNBQUFmLEdBQU8sTUFBQUQsR0FBZUMsSUFDdEIsU0FBQVcsR0FBTyxNQUFBRCxHQUFZQyxPQXFCM0I5QixFQUFBSSxVQUFBK0IsU0FBQSxXQUFBLEdBQUFDLEdBQUE1RCxJQUNFQSxNQUFLb0MsYUFBZXlCLE9BQ2pCN0QsS0FBSzBCLFFBQ04xQixLQUFLOEQsSUFBTTlELEtBQUswQixNQUNmcUMsT0FDQUwsVUFBVSxTQUFBSyxHQUVULE9BREFILEVBQUt4QixhQUFlMkIsRUFBYSxLQUMxQkgsRUFBS3hCLGNBQ1YsSUFBSyxVQUNId0IsRUFBS0ksT0FBUyxTQUNkLE1BQ0YsS0FBSyxVQUNISixFQUFLSSxPQUFTLFNBQ2QsTUFDRixLQUFLLGFBQ0hKLEVBQUtJLE9BQVMsWUFDZCxNQUNGLEtBQUssUUFDSEosRUFBS0ksT0FBUyxPQUNkLE1BQ0YsS0FBSyxhQUNISixFQUFLSSxPQUFTLGtCQU94QnhDLEVBQUFJLFVBQUFxQyxZQUFBLFdBQ0tqRSxLQUFLOEQsS0FDTjlELEtBQUs4RCxJQUFJSSxlQXZIakIxQyxFQUFBekIsWUFBQ3FCLE9BQUErQyxXQUNHQyxTQUFVQyxPQUFPQyxHQUNqQkMsU0FBVSxTQUNWQyxZQUFhLHdCQUNiQyxXQUFZLG1DQUNaQyxXQUFZbkQsZUFBQW9ELGFBQ1pDLFlBQWF0RCxTQUFBdUQscUJEcUdUN0QsV0FBVyxxQkFBc0JNLFNBQVN3RCxPQUFReEQsU0FBU3lELGVBQWdCeEQsZUFBZW9ELGVBQzNGbkQsS0NuR013RCxTQUFBeEQsZ0JBQWVBIiwiZmlsZSI6InNpZ251cC9zaWdudXAuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2NvcmUnKTtcbnZhciByb3V0ZXJfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL3JvdXRlcicpO1xudmFyIGF1dGhfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vc2hhcmVkL3NlcnZpY2VzL2F1dGguc2VydmljZScpO1xudmFyIFNpZ251cENvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2lnbnVwQ29tcG9uZW50KHJvdXRlciwgcm91dGUsIGF1dGhTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLnJvdXRlID0gcm91dGU7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UgPSBhdXRoU2VydmljZTtcbiAgICB9XG4gICAgU2lnbnVwQ29tcG9uZW50LnByb3RvdHlwZS5nb1RvRm9ybSA9IGZ1bmN0aW9uIChzZWxlY3RlZCkge1xuICAgICAgICAvLyByb3V0ZSB0byAjL3NpZ251cC86cGFyYW1zXG4gICAgICAgIHRoaXMuY29uZmlybVBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgdGhpcy5wd01zZ1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wd01zZ0ZhaWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvc2lnbnVwJywgc2VsZWN0ZWRdKTtcbiAgICB9O1xuICAgIFNpZ251cENvbXBvbmVudC5wcm90b3R5cGUuY2hlY2tTdHlsZSA9IGZ1bmN0aW9uIChzZWxlY3RlZCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvbGUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLmNoZWNrUHcgPSBmdW5jdGlvbiAoYXV0aCwgY29uZmlybVB3KSB7XG4gICAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHdNc2dGYWlsID0gZmFsc2U7XG4gICAgICAgIC8vT25seSBjaGVjayBpZiB0aGVyZSdzIHB3IGFuZCBoYXMgc2FtZSBsZW5ndGhcbiAgICAgICAgaWYgKGF1dGgucGFzc3dvcmQgJiYgY29uZmlybVB3KSB7XG4gICAgICAgICAgICAvLyBpZihhdXRoLnBhc3N3b3JkLmxlbmd0aCA9PT0gY29uZmlybVB3Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGF1dGgucGFzc3dvcmQgPT09IGNvbmZpcm1Qdykge1xuICAgICAgICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGF0IHRoZSBwdyBtYXRjaGVzXG4gICAgICAgICAgICAgICAgdGhpcy5wd01zZ1N1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9MZXQgdXNlciBrbm93IHRoYXQgdGhlIHB3IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICAgICAgICB0aGlzLnB3TXNnRmFpbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZ251cENvbXBvbmVudC5wcm90b3R5cGUub25TdWJtaXQgPSBmdW5jdGlvbiAoYXV0aCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vUFcgY2hlY2tpbmdcbiAgICAgICAgaWYgKGF1dGgucGFzc3dvcmQgPT09IHRoaXMuY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgICAgICAvL0Rvbid0IHNlbmQgY29uZmlybSBwYXNzd29yZCB0byB0aGUgYmFja2VuZFxuICAgICAgICAgICAgZGVsZXRlIGF1dGguY29uZmlybVBhc3N3b3JkO1xuICAgICAgICAgICAgYXV0aC5yb2xlID0gdGhpcy5zZWxlY3RlZFJvbGU7XG4gICAgICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLnNpZ25VcChhdXRoKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gaGFuZGxlUmVzcG9uc2UocmVzKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gaGFuZGxlRXJyb3IoZXJyKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgSlNPTi5zdHJpbmdpZnkocmVzLnRva2VuKSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudF91c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzLnVzZXIpKTtcbiAgICAgICAgICAgIHNlbGYucm91dGVyLm5hdmlnYXRlKFsnZGFzaGJvYXJkJ10pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycikge1xuICAgICAgICAgICAgaWYgKGVyci5zdGF0dXNUZXh0ID09PSAnQ29uZmxpY3QnKSB7XG4gICAgICAgICAgICAgICAgLy9MZXQgdXNlciBrbm93IHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3QnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTsgLy9FbmQgb2Ygb24gc3VibWl0XG4gICAgU2lnbnVwQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLnJvdXRlKSB7XG4gICAgICAgICAgICB0aGlzLnN1YiA9IHRoaXMucm91dGVcbiAgICAgICAgICAgICAgICAucGFyYW1zXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRSb2xlID0gcGFyYW1zWydyb2xlJ107XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfdGhpcy5zZWxlY3RlZFJvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3R1ZGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2xlQ2ggPSAnU3R1ZGVudCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWR2aXNvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2xlQ2ggPSAnQWR2aXNvcic7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3VwZXJ2aXNvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2xlQ2ggPSAnU3VwZXJ2aXNvcic7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRtaW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9sZUNoID0gJ0FkbWluJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdXBlcmFkbWluJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvbGVDaCA9ICdTdXBlcmFkbWluJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdWIpIHtcbiAgICAgICAgICAgIHRoaXMuc3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZ251cENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcbiAgICAgICAgICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgICAgICAgICBzZWxlY3RvcjogJ3NpZ251cCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ251cC5jb21wb25lbnQuaHRtbCcsXG4gICAgICAgICAgICBzdHlsZVVybHM6IFsnLi4vc2hhcmVkL3Njc3MvcGFydGlhbC9hdXRoLmNzcyddLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbYXV0aF9zZXJ2aWNlXzEuQXV0aFNlcnZpY2VdLFxuICAgICAgICAgICAgZGlyZWN0aXZlczogW3JvdXRlcl8xLlJPVVRFUl9ESVJFQ1RJVkVTXVxuICAgICAgICB9KSwgXG4gICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW3JvdXRlcl8xLlJvdXRlciwgcm91dGVyXzEuQWN0aXZhdGVkUm91dGUsIGF1dGhfc2VydmljZV8xLkF1dGhTZXJ2aWNlXSlcbiAgICBdLCBTaWdudXBDb21wb25lbnQpO1xuICAgIHJldHVybiBTaWdudXBDb21wb25lbnQ7XG59KCkpO1xuZXhwb3J0cy5TaWdudXBDb21wb25lbnQgPSBTaWdudXBDb21wb25lbnQ7XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIsIEFjdGl2YXRlZFJvdXRlLCBST1VURVJfRElSRUNUSVZFUyB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBOZ0NsYXNzIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tICcuLi9zaGFyZWQvc2VydmljZXMvYXV0aC5zZXJ2aWNlJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi9zaGFyZWQvdHlwZXMvYXV0aCc7XG5cbkBDb21wb25lbnQoe1xuICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgc2VsZWN0b3I6ICdzaWdudXAnLFxuICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi4vc2hhcmVkL3Njc3MvcGFydGlhbC9hdXRoLmNzcyddLFxuICAgIHByb3ZpZGVyczogW0F1dGhTZXJ2aWNlXSxcbiAgICBkaXJlY3RpdmVzOiBbUk9VVEVSX0RJUkVDVElWRVNdXG59KVxuXG5leHBvcnQgY2xhc3MgU2lnbnVwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblx0ICBwcml2YXRlIHNlbGVjdGVkUm9sZTogc3RyaW5nO1xuICAgIHByaXZhdGUgc3ViOiBhbnk7XG4gICAgcHJpdmF0ZSByb2xlQ2g6IHN0cmluZztcbiAgICBwcml2YXRlIGNvbmZpcm1QYXNzd29yZDogc3RyaW5nO1xuICAgIHByaXZhdGUgcHdNc2dTdWNjZXNzOiBib29sZWFuO1xuICAgIHByaXZhdGUgcHdNc2dGYWlsOiBib29sZWFuO1xuICAgIHByaXZhdGUgbG9nTWVzc2FnZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgXHRwcml2YXRlIHJvdXRlcjogUm91dGVyLFxuICAgICAgcHJpdmF0ZSByb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgICBwcml2YXRlIGF1dGhTZXJ2aWNlOiBBdXRoU2VydmljZVxuICAgICkgeyB9XG5cbiAgICBnb1RvRm9ybShzZWxlY3RlZDogc3RyaW5nKSB7XG4gICAgICAvLyByb3V0ZSB0byAjL3NpZ251cC86cGFyYW1zXG4gICAgICB0aGlzLmNvbmZpcm1QYXNzd29yZCA9IG51bGw7XG4gICAgICB0aGlzLnB3TXNnU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgdGhpcy5wd01zZ0ZhaWwgPSBmYWxzZTtcbiAgICBcdHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL3NpZ251cCcsIHNlbGVjdGVkXSk7XG4gIFx0fVxuXG4gICAgY2hlY2tTdHlsZShzZWxlY3RlZDogc3RyaW5nKSB7XG4gICAgICBpZih0aGlzLnNlbGVjdGVkUm9sZSA9PT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY2hlY2tQdyhhdXRoOiBBdXRoLCBjb25maXJtUHc6IHN0cmluZykge1xuICAgICAgdGhpcy5wd01zZ1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgIHRoaXMucHdNc2dGYWlsID0gZmFsc2U7XG4gICAgICAvL09ubHkgY2hlY2sgaWYgdGhlcmUncyBwdyBhbmQgaGFzIHNhbWUgbGVuZ3RoXG4gICAgICBpZihhdXRoLnBhc3N3b3JkICYmIGNvbmZpcm1Qdykge1xuICAgICAgICAvLyBpZihhdXRoLnBhc3N3b3JkLmxlbmd0aCA9PT0gY29uZmlybVB3Lmxlbmd0aCkge1xuICAgICAgICAgIGlmKGF1dGgucGFzc3dvcmQgPT09IGNvbmZpcm1Qdykge1xuICAgICAgICAgICAgLy9MZXQgdXNlciBrbm93IHRoYXQgdGhlIHB3IG1hdGNoZXNcbiAgICAgICAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gdHJ1ZTtcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL0xldCB1c2VyIGtub3cgdGhhdCB0aGUgcHcgZG9lc24ndCBtYXRjaFxuICAgICAgICAgICAgdGhpcy5wd01zZ0ZhaWwgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgLy8gfVxuICAgICAgfVxuICAgIH1cblxuICAgIG9uU3VibWl0KGF1dGg6IEF1dGgpIHtcbiAgICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgICAgLy9QVyBjaGVja2luZ1xuICAgICAgaWYoYXV0aC5wYXNzd29yZCA9PT0gdGhpcy5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgLy9Eb24ndCBzZW5kIGNvbmZpcm0gcGFzc3dvcmQgdG8gdGhlIGJhY2tlbmRcbiAgICAgICAgZGVsZXRlIGF1dGguY29uZmlybVBhc3N3b3JkO1xuICAgICAgICBhdXRoLnJvbGUgPSB0aGlzLnNlbGVjdGVkUm9sZTtcbiAgICAgICAgdGhpcy5hdXRoU2VydmljZS5zaWduVXAoYXV0aClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICByZXMgPT4gaGFuZGxlUmVzcG9uc2UocmVzKSxcbiAgICAgICAgICAgIGVyciA9PiBoYW5kbGVFcnJvcihlcnIpXG4gICAgICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgSlNPTi5zdHJpbmdpZnkocmVzLnRva2VuKSk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRfdXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcy51c2VyKSk7XG4gICAgICAgICAgc2VsZi5yb3V0ZXIubmF2aWdhdGUoWydkYXNoYm9hcmQnXSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycikge1xuICAgICAgICBpZihlcnIuc3RhdHVzVGV4dCA9PT0gJ0NvbmZsaWN0Jykge1xuICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RcbiAgICAgICAgICBjb25zb2xlLmxvZygndGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAvLyBzZWxmLmxvZ01lc3NhZ2UgPSBKU09OLnBhcnNlKGVyci5fYm9keSkuZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9Ly9FbmQgb2Ygb24gc3VibWl0XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlID0gdW5kZWZpbmVkO1xuICAgICAgaWYodGhpcy5yb3V0ZSkge1xuICAgICAgICB0aGlzLnN1YiA9IHRoaXMucm91dGVcbiAgICAgICAgLnBhcmFtc1xuICAgICAgICAuc3Vic2NyaWJlKHBhcmFtcyA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFJvbGUgPSBwYXJhbXNbJ3JvbGUnXTtcbiAgICAgICAgICBzd2l0Y2godGhpcy5zZWxlY3RlZFJvbGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0dWRlbnQnOlxuICAgICAgICAgICAgICB0aGlzLnJvbGVDaCA9ICdTdHVkZW50JztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhZHZpc29yJzpcbiAgICAgICAgICAgICAgdGhpcy5yb2xlQ2ggPSAnQWR2aXNvcic7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3VwZXJ2aXNvcic6XG4gICAgICAgICAgICAgIHRoaXMucm9sZUNoID0gJ1N1cGVydmlzb3InO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FkbWluJzpcbiAgICAgICAgICAgICAgdGhpcy5yb2xlQ2ggPSAnQWRtaW4nO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3N1cGVyYWRtaW4nOlxuICAgICAgICAgICAgICB0aGlzLnJvbGVDaCA9ICdTdXBlcmFkbWluJztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgIGlmKHRoaXMuc3ViKXtcbiAgICAgICAgdGhpcy5zdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICB9XG59ICBcblx0Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
