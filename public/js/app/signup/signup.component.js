"use strict";var __decorate=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,n=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(n=(i<3?o(n):i>3?o(t,s,n):o(t,s))||n);return i>3&&n&&Object.defineProperty(t,s,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),signup_service_1=require("../shared/services/signup.service"),SignupComponent=function(){function e(e,t,s){this.router=e,this.route=t,this.signupService=s}return e.prototype.goToForm=function(e){this.confirmPassword=null,this.pwMsgSuccess=!1,this.pwMsgFail=!1,this.router.navigate(["/signup",e])},e.prototype.checkStyle=function(e){return this.selectedRole===e},e.prototype.checkPw=function(e,t){this.pwMsgSuccess=!1,this.pwMsgFail=!1,e.password&&t&&(e.password===t?this.pwMsgSuccess=!0:this.pwMsgFail=!0)},e.prototype.onSubmit=function(e){function t(e){console.log(e),localStorage.setItem("id_token",JSON.stringify(e.token)),localStorage.setItem("current_user",JSON.stringify(e.user)),r.router.navigate(["dashboard"])}function s(e){"Conflict"===e.statusText&&(console.log("this email already exist"),console.log(e))}var r=this;e.password===this.confirmPassword&&(delete e.confirmPassword,e.role=this.selectedRole,this.signupService.signUp(e).subscribe(function(e){return t(e)},function(e){return s(e)}))},e.prototype.ngOnInit=function(){var e=this;this.selectedRole=void 0,this.route&&(this.sub=this.route.params.subscribe(function(t){switch(e.selectedRole=t.role,e.selectedRole){case"student":e.roleCh="学员";break;case"advisor":e.roleCh="顾问";break;case"admin":e.roleCh="管理员"}}))},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e=__decorate([core_1.Component({moduleId:module.id,selector:"signup",templateUrl:"signup.component.html",styleUrls:["../shared/scss/partial/auth.css"],providers:[signup_service_1.SignupService],directives:[router_1.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[router_1.Router,router_1.ActivatedRoute,signup_service_1.SignupService])],e)}();exports.SignupComponent=SignupComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC9zaWdudXAuY29tcG9uZW50LmpzIiwic2lnbnVwL3NpZ251cC5jb21wb25lbnQudHMiXSwibmFtZXMiOlsiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwicmVxdWlyZSIsInJvdXRlcl8xIiwic2lnbnVwX3NlcnZpY2VfMSIsIlNpZ251cENvbXBvbmVudCIsInJvdXRlciIsInJvdXRlIiwic2lnbnVwU2VydmljZSIsInByb3RvdHlwZSIsImdvVG9Gb3JtIiwic2VsZWN0ZWQiLCJjb25maXJtUGFzc3dvcmQiLCJwd01zZ1N1Y2Nlc3MiLCJwd01zZ0ZhaWwiLCJuYXZpZ2F0ZSIsImNoZWNrU3R5bGUiLCJzZWxlY3RlZFJvbGUiLCJjaGVja1B3IiwiYXV0aCIsImNvbmZpcm1QdyIsInBhc3N3b3JkIiwib25TdWJtaXQiLCJoYW5kbGVSZXNwb25zZSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInRva2VuIiwidXNlciIsInNlbGYiLCJoYW5kbGVFcnJvciIsImVyciIsInN0YXR1c1RleHQiLCJyb2xlIiwic2lnblVwIiwic3Vic2NyaWJlIiwibmdPbkluaXQiLCJfdGhpcyIsInVuZGVmaW5lZCIsInN1YiIsInBhcmFtcyIsInJvbGVDaCIsIm5nT25EZXN0cm95IiwidW5zdWJzY3JpYmUiLCJDb21wb25lbnQiLCJtb2R1bGVJZCIsIm1vZHVsZSIsImlkIiwic2VsZWN0b3IiLCJ0ZW1wbGF0ZVVybCIsInN0eWxlVXJscyIsInByb3ZpZGVycyIsIlNpZ251cFNlcnZpY2UiLCJkaXJlY3RpdmVzIiwiUk9VVEVSX0RJUkVDVElWRVMiLCJSb3V0ZXIiLCJBY3RpdmF0ZWRSb3V0ZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBQ0EsSUFBSUEsWUFBY0MsTUFBUUEsS0FBS0QsWUFBZSxTQUFVRSxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQUtILEVBQUksRUFBSUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFLTSxHQUFLSixFQUFFSCxFQUFRQyxLQUFTTSxFQUNoSixPQUFPSCxHQUFJLEdBQUtHLEdBQUtDLE9BQU9LLGVBQWViLEVBQVFDLEVBQUtNLEdBQUlBLEdBRTVETyxXQUFjaEIsTUFBUUEsS0FBS2dCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpOLFVBQW9ELGtCQUFyQkEsU0FBUU8sU0FBeUIsTUFBT1AsU0FBUU8sU0FBU0YsRUFBR0MsSUNSMUdFLE9BQUFDLFFBQTZDLGlCQUM3Q0MsU0FBQUQsUUFBMEQsbUJBRzFERSxpQkFBQUYsUUFBOEIscUNBWTlCRyxnQkFBQSxXQVNJLFFBQUFBLEdBQ1NDLEVBQ0NDLEVBQ0FDLEdBRkQzQixLQUFBeUIsT0FBQUEsRUFDQ3pCLEtBQUEwQixNQUFBQSxFQUNBMUIsS0FBQTJCLGNBQUFBLEVBK0ZkLE1BNUZJSCxHQUFBSSxVQUFBQyxTQUFBLFNBQVNDLEdBRVA5QixLQUFLK0IsZ0JBQWtCLEtBQ3ZCL0IsS0FBS2dDLGNBQWUsRUFDcEJoQyxLQUFLaUMsV0FBWSxFQUNsQmpDLEtBQUt5QixPQUFPUyxVQUFVLFVBQVdKLEtBR2xDTixFQUFBSSxVQUFBTyxXQUFBLFNBQVdMLEdBQ1QsTUFBRzlCLE1BQUtvQyxlQUFpQk4sR0FNM0JOLEVBQUFJLFVBQUFTLFFBQUEsU0FBUUMsRUFBWUMsR0FDbEJ2QyxLQUFLZ0MsY0FBZSxFQUNwQmhDLEtBQUtpQyxXQUFZLEVBRWRLLEVBQUtFLFVBQVlELElBRWJELEVBQUtFLFdBQWFELEVBRW5CdkMsS0FBS2dDLGNBQWUsRUFJcEJoQyxLQUFLaUMsV0FBWSxJQU16QlQsRUFBQUksVUFBQWEsU0FBQSxTQUFTSCxHQWVQLFFBQUFJLEdBQXdCQyxHQUNwQkMsUUFBUUMsSUFBSUYsR0FDWkcsYUFBYUMsUUFBUSxXQUFZQyxLQUFLQyxVQUFVTixFQUFJTyxRQUNwREosYUFBYUMsUUFBUSxlQUFnQkMsS0FBS0MsVUFBVU4sRUFBSVEsT0FDeERDLEVBQUszQixPQUFPUyxVQUFVLGNBRzFCLFFBQUFtQixHQUFxQkMsR0FDRyxhQUFuQkEsRUFBSUMsYUFFTFgsUUFBUUMsSUFBSSw0QkFDWkQsUUFBUUMsSUFBSVMsSUF6QmhCLEdBQUlGLEdBQU9wRCxJQUdSc0MsR0FBS0UsV0FBYXhDLEtBQUsrQix3QkFFakJPLEdBQUtQLGdCQUNaTyxFQUFLa0IsS0FBT3hELEtBQUtvQyxhQUNqQnBDLEtBQUsyQixjQUFjOEIsT0FBT25CLEdBQ3JCb0IsVUFDRCxTQUFBZixHQUFPLE1BQUFELEdBQWVDLElBQ3RCLFNBQUFXLEdBQU8sTUFBQUQsR0FBWUMsT0FxQjNCOUIsRUFBQUksVUFBQStCLFNBQUEsV0FBQSxHQUFBQyxHQUFBNUQsSUFDRUEsTUFBS29DLGFBQWV5QixPQUNqQjdELEtBQUswQixRQUNOMUIsS0FBSzhELElBQU05RCxLQUFLMEIsTUFDZnFDLE9BQ0FMLFVBQVUsU0FBQUssR0FFVCxPQURBSCxFQUFLeEIsYUFBZTJCLEVBQWEsS0FDMUJILEVBQUt4QixjQUNWLElBQUssVUFDSHdCLEVBQUtJLE9BQVMsSUFDZCxNQUNGLEtBQUssVUFDSEosRUFBS0ksT0FBUyxJQUNkLE1BQ0YsS0FBSyxRQUNISixFQUFLSSxPQUFTLFdBT3hCeEMsRUFBQUksVUFBQXFDLFlBQUEsV0FDS2pFLEtBQUs4RCxLQUNOOUQsS0FBSzhELElBQUlJLGVBakhqQjFDLEVBQUF6QixZQUFDcUIsT0FBQStDLFdBQ0dDLFNBQVVDLE9BQU9DLEdBQ2pCQyxTQUFVLFNBQ1ZDLFlBQWEsd0JBQ2JDLFdBQVksbUNBQ1pDLFdBQVluRCxpQkFBQW9ELGVBQ1pDLFlBQWF0RCxTQUFBdUQscUJEK0ZUN0QsV0FBVyxxQkFBc0JNLFNBQVN3RCxPQUFReEQsU0FBU3lELGVBQWdCeEQsaUJBQWlCb0QsaUJBQzdGbkQsS0M3Rk13RCxTQUFBeEQsZ0JBQWVBIiwiZmlsZSI6InNpZ251cC9zaWdudXAuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2NvcmUnKTtcbnZhciByb3V0ZXJfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL3JvdXRlcicpO1xudmFyIHNpZ251cF9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9zaGFyZWQvc2VydmljZXMvc2lnbnVwLnNlcnZpY2UnKTtcbnZhciBTaWdudXBDb21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNpZ251cENvbXBvbmVudChyb3V0ZXIsIHJvdXRlLCBzaWdudXBTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLnJvdXRlID0gcm91dGU7XG4gICAgICAgIHRoaXMuc2lnbnVwU2VydmljZSA9IHNpZ251cFNlcnZpY2U7XG4gICAgfVxuICAgIFNpZ251cENvbXBvbmVudC5wcm90b3R5cGUuZ29Ub0Zvcm0gPSBmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgLy8gcm91dGUgdG8gIy9zaWdudXAvOnBhcmFtc1xuICAgICAgICB0aGlzLmNvbmZpcm1QYXNzd29yZCA9IG51bGw7XG4gICAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHdNc2dGYWlsID0gZmFsc2U7XG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL3NpZ251cCcsIHNlbGVjdGVkXSk7XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLmNoZWNrU3R5bGUgPSBmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb2xlID09PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2lnbnVwQ29tcG9uZW50LnByb3RvdHlwZS5jaGVja1B3ID0gZnVuY3Rpb24gKGF1dGgsIGNvbmZpcm1Qdykge1xuICAgICAgICB0aGlzLnB3TXNnU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnB3TXNnRmFpbCA9IGZhbHNlO1xuICAgICAgICAvL09ubHkgY2hlY2sgaWYgdGhlcmUncyBwdyBhbmQgaGFzIHNhbWUgbGVuZ3RoXG4gICAgICAgIGlmIChhdXRoLnBhc3N3b3JkICYmIGNvbmZpcm1Qdykge1xuICAgICAgICAgICAgLy8gaWYoYXV0aC5wYXNzd29yZC5sZW5ndGggPT09IGNvbmZpcm1Qdy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChhdXRoLnBhc3N3b3JkID09PSBjb25maXJtUHcpIHtcbiAgICAgICAgICAgICAgICAvL0xldCB1c2VyIGtub3cgdGhhdCB0aGUgcHcgbWF0Y2hlc1xuICAgICAgICAgICAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGF0IHRoZSBwdyBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgICAgICAgdGhpcy5wd01zZ0ZhaWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTaWdudXBDb21wb25lbnQucHJvdG90eXBlLm9uU3VibWl0ID0gZnVuY3Rpb24gKGF1dGgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvL1BXIGNoZWNraW5nXG4gICAgICAgIGlmIChhdXRoLnBhc3N3b3JkID09PSB0aGlzLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICAgICAgLy9Eb24ndCBzZW5kIGNvbmZpcm0gcGFzc3dvcmQgdG8gdGhlIGJhY2tlbmRcbiAgICAgICAgICAgIGRlbGV0ZSBhdXRoLmNvbmZpcm1QYXNzd29yZDtcbiAgICAgICAgICAgIGF1dGgucm9sZSA9IHRoaXMuc2VsZWN0ZWRSb2xlO1xuICAgICAgICAgICAgdGhpcy5zaWdudXBTZXJ2aWNlLnNpZ25VcChhdXRoKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gaGFuZGxlUmVzcG9uc2UocmVzKTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gaGFuZGxlRXJyb3IoZXJyKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgSlNPTi5zdHJpbmdpZnkocmVzLnRva2VuKSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudF91c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzLnVzZXIpKTtcbiAgICAgICAgICAgIHNlbGYucm91dGVyLm5hdmlnYXRlKFsnZGFzaGJvYXJkJ10pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycikge1xuICAgICAgICAgICAgaWYgKGVyci5zdGF0dXNUZXh0ID09PSAnQ29uZmxpY3QnKSB7XG4gICAgICAgICAgICAgICAgLy9MZXQgdXNlciBrbm93IHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3QnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTsgLy9FbmQgb2Ygb24gc3VibWl0XG4gICAgU2lnbnVwQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLnJvdXRlKSB7XG4gICAgICAgICAgICB0aGlzLnN1YiA9IHRoaXMucm91dGVcbiAgICAgICAgICAgICAgICAucGFyYW1zXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRSb2xlID0gcGFyYW1zWydyb2xlJ107XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfdGhpcy5zZWxlY3RlZFJvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3R1ZGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2xlQ2ggPSAn5a2m5ZGYJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhZHZpc29yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvbGVDaCA9ICfpob7pl64nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkbWluJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvbGVDaCA9ICfnrqHnkIblkZgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpZ251cENvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1Yikge1xuICAgICAgICAgICAgdGhpcy5zdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2lnbnVwQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xuICAgICAgICAgICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnc2lnbnVwJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwLmNvbXBvbmVudC5odG1sJyxcbiAgICAgICAgICAgIHN0eWxlVXJsczogWycuLi9zaGFyZWQvc2Nzcy9wYXJ0aWFsL2F1dGguY3NzJ10sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtzaWdudXBfc2VydmljZV8xLlNpZ251cFNlcnZpY2VdLFxuICAgICAgICAgICAgZGlyZWN0aXZlczogW3JvdXRlcl8xLlJPVVRFUl9ESVJFQ1RJVkVTXVxuICAgICAgICB9KSwgXG4gICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW3JvdXRlcl8xLlJvdXRlciwgcm91dGVyXzEuQWN0aXZhdGVkUm91dGUsIHNpZ251cF9zZXJ2aWNlXzEuU2lnbnVwU2VydmljZV0pXG4gICAgXSwgU2lnbnVwQ29tcG9uZW50KTtcbiAgICByZXR1cm4gU2lnbnVwQ29tcG9uZW50O1xufSgpKTtcbmV4cG9ydHMuU2lnbnVwQ29tcG9uZW50ID0gU2lnbnVwQ29tcG9uZW50O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyLCBBY3RpdmF0ZWRSb3V0ZSwgUk9VVEVSX0RJUkVDVElWRVMgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgTmdDbGFzcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IFNpZ251cFNlcnZpY2UgfSBmcm9tICcuLi9zaGFyZWQvc2VydmljZXMvc2lnbnVwLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXV0aCB9IGZyb20gJy4uL3NoYXJlZC90eXBlcy9hdXRoJztcblxuQENvbXBvbmVudCh7XG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBzZWxlY3RvcjogJ3NpZ251cCcsXG4gICAgdGVtcGxhdGVVcmw6ICdzaWdudXAuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuLi9zaGFyZWQvc2Nzcy9wYXJ0aWFsL2F1dGguY3NzJ10sXG4gICAgcHJvdmlkZXJzOiBbU2lnbnVwU2VydmljZV0sXG4gICAgZGlyZWN0aXZlczogW1JPVVRFUl9ESVJFQ1RJVkVTXVxufSlcblxuZXhwb3J0IGNsYXNzIFNpZ251cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cdCAgcHJpdmF0ZSBzZWxlY3RlZFJvbGU6IHN0cmluZztcbiAgICBwcml2YXRlIHN1YjogYW55O1xuICAgIHByaXZhdGUgcm9sZUNoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjb25maXJtUGFzc3dvcmQ6IHN0cmluZztcbiAgICBwcml2YXRlIHB3TXNnU3VjY2VzczogYm9vbGVhbjtcbiAgICBwcml2YXRlIHB3TXNnRmFpbDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGxvZ01lc3NhZ2U6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgIFx0cHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICAgIHByaXZhdGUgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgICAgcHJpdmF0ZSBzaWdudXBTZXJ2aWNlOiBTaWdudXBTZXJ2aWNlXG4gICAgKSB7IH1cblxuICAgIGdvVG9Gb3JtKHNlbGVjdGVkOiBzdHJpbmcpIHtcbiAgICAgIC8vIHJvdXRlIHRvICMvc2lnbnVwLzpwYXJhbXNcbiAgICAgIHRoaXMuY29uZmlybVBhc3N3b3JkID0gbnVsbDtcbiAgICAgIHRoaXMucHdNc2dTdWNjZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLnB3TXNnRmFpbCA9IGZhbHNlO1xuICAgIFx0dGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvc2lnbnVwJywgc2VsZWN0ZWRdKTtcbiAgXHR9XG5cbiAgICBjaGVja1N0eWxlKHNlbGVjdGVkOiBzdHJpbmcpIHtcbiAgICAgIGlmKHRoaXMuc2VsZWN0ZWRSb2xlID09PSBzZWxlY3RlZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjaGVja1B3KGF1dGg6IEF1dGgsIGNvbmZpcm1Qdzogc3RyaW5nKSB7XG4gICAgICB0aGlzLnB3TXNnU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgdGhpcy5wd01zZ0ZhaWwgPSBmYWxzZTtcbiAgICAgIC8vT25seSBjaGVjayBpZiB0aGVyZSdzIHB3IGFuZCBoYXMgc2FtZSBsZW5ndGhcbiAgICAgIGlmKGF1dGgucGFzc3dvcmQgJiYgY29uZmlybVB3KSB7XG4gICAgICAgIC8vIGlmKGF1dGgucGFzc3dvcmQubGVuZ3RoID09PSBjb25maXJtUHcubGVuZ3RoKSB7XG4gICAgICAgICAgaWYoYXV0aC5wYXNzd29yZCA9PT0gY29uZmlybVB3KSB7XG4gICAgICAgICAgICAvL0xldCB1c2VyIGtub3cgdGhhdCB0aGUgcHcgbWF0Y2hlc1xuICAgICAgICAgICAgdGhpcy5wd01zZ1N1Y2Nlc3MgPSB0cnVlO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vTGV0IHVzZXIga25vdyB0aGF0IHRoZSBwdyBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgICB0aGlzLnB3TXNnRmFpbCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAvLyB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgb25TdWJtaXQoYXV0aDogQXV0aCkge1xuICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAvL1BXIGNoZWNraW5nXG4gICAgICBpZihhdXRoLnBhc3N3b3JkID09PSB0aGlzLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICAvL0Rvbid0IHNlbmQgY29uZmlybSBwYXNzd29yZCB0byB0aGUgYmFja2VuZFxuICAgICAgICBkZWxldGUgYXV0aC5jb25maXJtUGFzc3dvcmQ7XG4gICAgICAgIGF1dGgucm9sZSA9IHRoaXMuc2VsZWN0ZWRSb2xlO1xuICAgICAgICB0aGlzLnNpZ251cFNlcnZpY2Uuc2lnblVwKGF1dGgpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgcmVzID0+IGhhbmRsZVJlc3BvbnNlKHJlcyksXG4gICAgICAgICAgICBlcnIgPT4gaGFuZGxlRXJyb3IoZXJyKVxuICAgICAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIEpTT04uc3RyaW5naWZ5KHJlcy50b2tlbikpO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50X3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXMudXNlcikpO1xuICAgICAgICAgIHNlbGYucm91dGVyLm5hdmlnYXRlKFsnZGFzaGJvYXJkJ10pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHtcbiAgICAgICAgaWYoZXJyLnN0YXR1c1RleHQgPT09ICdDb25mbGljdCcpIHtcbiAgICAgICAgICAvL0xldCB1c2VyIGtub3cgdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0XG4gICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgZW1haWwgYWxyZWFkeSBleGlzdCcpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgLy8gc2VsZi5sb2dNZXNzYWdlID0gSlNPTi5wYXJzZShlcnIuX2JvZHkpLm1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9Ly9FbmQgb2Ygb24gc3VibWl0XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRSb2xlID0gdW5kZWZpbmVkO1xuICAgICAgaWYodGhpcy5yb3V0ZSkge1xuICAgICAgICB0aGlzLnN1YiA9IHRoaXMucm91dGVcbiAgICAgICAgLnBhcmFtc1xuICAgICAgICAuc3Vic2NyaWJlKHBhcmFtcyA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFJvbGUgPSBwYXJhbXNbJ3JvbGUnXTtcbiAgICAgICAgICBzd2l0Y2godGhpcy5zZWxlY3RlZFJvbGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0dWRlbnQnOlxuICAgICAgICAgICAgICB0aGlzLnJvbGVDaCA9ICflrablkZgnO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Fkdmlzb3InOlxuICAgICAgICAgICAgICB0aGlzLnJvbGVDaCA9ICfpob7pl64nO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FkbWluJzpcbiAgICAgICAgICAgICAgdGhpcy5yb2xlQ2ggPSAn566h55CG5ZGYJztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgIGlmKHRoaXMuc3ViKXtcbiAgICAgICAgdGhpcy5zdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICB9XG59ICBcblx0Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
