"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var n,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(s<3?n(i):s>3?n(t,r,i):n(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),moment=require("moment"),index_1=require("../../shared/services/index"),CompanyComponent=function(){function e(e,t,r,o){this.router=e,this.authService=t,this.adminService=r,this.userDataService=o,this.currentUser={},this.userDataList={},this.arrayOfUsersKeys=[],this.selectedUser={}}return e.prototype.getUser=function(){var e=this;this.authService.getCurrentUser(JSON.parse(localStorage.getItem("current_user"))._id).subscribe(function(t){e.currentUser=t},function(t){e.authService.logUserOut(),console.log(t)})},e.prototype.getUsers=function(){var e=this;this.adminService.getAllUsers().subscribe(function(t){console.log("All Users: ",t),e.userDataList=t,e.arrayOfUsersKeys=Object.keys(t)},function(t){e.authService.logUserOut(),console.log(t)})},e.prototype.renderLLT=function(e){return moment(e).format("LLL")},e.prototype.getSingleUser=function(e){var t=this;this.selectedUserId=e,this.userDataService.getSingleUser(e).subscribe(function(e){e._id==t.selectedUserId&&(console.log("Single User: ",e),t.selectedUser=e)},function(e){console.log(e)})},e.prototype.ngOnInit=function(){this.currentUser=JSON.parse(localStorage.getItem("current_user")),this.getUser()},e=__decorate([core_1.Component({moduleId:module.id,selector:"yeah-company",templateUrl:"company.component.html",styleUrls:["company.style.css"],providers:[index_1.AuthService,index_1.AdminService,index_1.UserDataService]}),__metadata("design:paramtypes",[router_1.Router,index_1.AuthService,index_1.AdminService,index_1.UserDataService])],e)}();exports.CompanyComponent=CompanyComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZC9jb21wYW55L2NvbXBhbnkuY29tcG9uZW50LmpzIiwiZGFzaGJvYXJkL2NvbXBhbnkvY29tcGFueS5jb21wb25lbnQudHMiXSwibmFtZXMiOlsiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwicmVxdWlyZSIsInJvdXRlcl8xIiwibW9tZW50IiwiaW5kZXhfMSIsIkNvbXBhbnlDb21wb25lbnQiLCJyb3V0ZXIiLCJhdXRoU2VydmljZSIsImFkbWluU2VydmljZSIsInVzZXJEYXRhU2VydmljZSIsImN1cnJlbnRVc2VyIiwidXNlckRhdGFMaXN0IiwiYXJyYXlPZlVzZXJzS2V5cyIsInNlbGVjdGVkVXNlciIsInByb3RvdHlwZSIsImdldFVzZXIiLCJfdGhpcyIsImdldEN1cnJlbnRVc2VyIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIl9pZCIsInN1YnNjcmliZSIsInVzZXIiLCJlcnJvciIsImxvZ1VzZXJPdXQiLCJjb25zb2xlIiwibG9nIiwiZ2V0VXNlcnMiLCJnZXRBbGxVc2VycyIsInVzZXJzIiwia2V5cyIsInJlbmRlckxMVCIsInVuaXgiLCJmb3JtYXQiLCJnZXRTaW5nbGVVc2VyIiwidXNlcklkIiwic2VsZWN0ZWRVc2VySWQiLCJuZ09uSW5pdCIsIkNvbXBvbmVudCIsIm1vZHVsZUlkIiwibW9kdWxlIiwiaWQiLCJzZWxlY3RvciIsInRlbXBsYXRlVXJsIiwic3R5bGVVcmxzIiwicHJvdmlkZXJzIiwiQXV0aFNlcnZpY2UiLCJBZG1pblNlcnZpY2UiLCJVc2VyRGF0YVNlcnZp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U0FBU2lELE9BQVEvQyxRQUFRNEMsWUFBYTVDLFFBQVE2QyxhQUFjN0MsUUFBUThDLG1CQUN0RzdDLEtDOURNK0MsU0FBQS9DLGlCQUFnQkEiLCJmaWxlIjoiZGFzaGJvYXJkL2NvbXBhbnkvY29tcGFueS5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgY29yZV8xID0gcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpO1xudmFyIHJvdXRlcl8xID0gcmVxdWlyZSgnQGFuZ3VsYXIvcm91dGVyJyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgaW5kZXhfMSA9IHJlcXVpcmUoJy4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9pbmRleCcpO1xudmFyIENvbXBhbnlDb21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbXBhbnlDb21wb25lbnQocm91dGVyLCBhdXRoU2VydmljZSwgYWRtaW5TZXJ2aWNlLCB1c2VyRGF0YVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UgPSBhdXRoU2VydmljZTtcbiAgICAgICAgdGhpcy5hZG1pblNlcnZpY2UgPSBhZG1pblNlcnZpY2U7XG4gICAgICAgIHRoaXMudXNlckRhdGFTZXJ2aWNlID0gdXNlckRhdGFTZXJ2aWNlO1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0ge307XG4gICAgICAgIHRoaXMudXNlckRhdGFMaXN0ID0ge307XG4gICAgICAgIHRoaXMuYXJyYXlPZlVzZXJzS2V5cyA9IFtdO1xuICAgICAgICB0aGlzLnNlbGVjdGVkVXNlciA9IHt9O1xuICAgIH1cbiAgICBDb21wYW55Q29tcG9uZW50LnByb3RvdHlwZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLmdldEN1cnJlbnRVc2VyKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRfdXNlcicpKS5faWQpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICAgICBfdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgX3RoaXMuYXV0aFNlcnZpY2UubG9nVXNlck91dCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvbXBhbnlDb21wb25lbnQucHJvdG90eXBlLmdldFVzZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmFkbWluU2VydmljZS5nZXRBbGxVc2VycygpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0FsbCBVc2VyczogJywgdXNlcnMpO1xuICAgICAgICAgICAgX3RoaXMudXNlckRhdGFMaXN0ID0gdXNlcnM7XG4gICAgICAgICAgICBfdGhpcy5hcnJheU9mVXNlcnNLZXlzID0gT2JqZWN0LmtleXModXNlcnMpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIF90aGlzLmF1dGhTZXJ2aWNlLmxvZ1VzZXJPdXQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb21wYW55Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJMTFQgPSBmdW5jdGlvbiAodW5peCkge1xuICAgICAgICByZXR1cm4gbW9tZW50KHVuaXgpLmZvcm1hdCgnTExMJyk7XG4gICAgfTtcbiAgICBDb21wYW55Q29tcG9uZW50LnByb3RvdHlwZS5nZXRTaW5nbGVVc2VyID0gZnVuY3Rpb24gKHVzZXJJZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcklkID0gdXNlcklkO1xuICAgICAgICB0aGlzLnVzZXJEYXRhU2VydmljZS5nZXRTaW5nbGVVc2VyKHVzZXJJZClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgICAgIGlmICh1c2VyLl9pZCA9PSBfdGhpcy5zZWxlY3RlZFVzZXJJZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTaW5nbGUgVXNlcjogJywgdXNlcik7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRVc2VyID0gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29tcGFueUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X3VzZXInKSk7XG4gICAgICAgIHRoaXMuZ2V0VXNlcigpO1xuICAgIH07XG4gICAgQ29tcGFueUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcbiAgICAgICAgICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgICAgICAgICBzZWxlY3RvcjogJ3llYWgtY29tcGFueScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBhbnkuY29tcG9uZW50Lmh0bWwnLFxuICAgICAgICAgICAgc3R5bGVVcmxzOiBbJ2NvbXBhbnkuc3R5bGUuY3NzJ10sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtpbmRleF8xLkF1dGhTZXJ2aWNlLCBpbmRleF8xLkFkbWluU2VydmljZSwgaW5kZXhfMS5Vc2VyRGF0YVNlcnZpY2VdXG4gICAgICAgIH0pLCBcbiAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbcm91dGVyXzEuUm91dGVyLCBpbmRleF8xLkF1dGhTZXJ2aWNlLCBpbmRleF8xLkFkbWluU2VydmljZSwgaW5kZXhfMS5Vc2VyRGF0YVNlcnZpY2VdKVxuICAgIF0sIENvbXBhbnlDb21wb25lbnQpO1xuICAgIHJldHVybiBDb21wYW55Q29tcG9uZW50O1xufSgpKTtcbmV4cG9ydHMuQ29tcGFueUNvbXBvbmVudCA9IENvbXBhbnlDb21wb25lbnQ7XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyIH0gICAgZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcblxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL3NoYXJlZC90eXBlcy91c2VyJ1xuaW1wb3J0IHsgQXV0aFNlcnZpY2UsIEFkbWluU2VydmljZSwgVXNlckRhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3NlcnZpY2VzL2luZGV4JztcblxuQENvbXBvbmVudCh7XG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBzZWxlY3RvcjogJ3llYWgtY29tcGFueScsXG4gICAgdGVtcGxhdGVVcmw6ICdjb21wYW55LmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnY29tcGFueS5zdHlsZS5jc3MnXSxcbiAgICBwcm92aWRlcnM6IFtBdXRoU2VydmljZSwgQWRtaW5TZXJ2aWNlLCBVc2VyRGF0YVNlcnZpY2VdXG59KVxuZXhwb3J0IGNsYXNzIENvbXBhbnlDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIHByaXZhdGUgY3VycmVudFVzZXIgPSB7fTtcbiAgICBwcml2YXRlIHVzZXJEYXRhTGlzdCA9IHt9O1xuICAgIHByaXZhdGUgYXJyYXlPZlVzZXJzS2V5cyA9IFtdO1xuICAgIHByaXZhdGUgc2VsZWN0ZWRVc2VySWQ6IHN0cmluZztcbiAgICBwcml2YXRlIHNlbGVjdGVkVXNlciA9IHt9O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgICAgIHByaXZhdGUgYXV0aFNlcnZpY2U6IEF1dGhTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGFkbWluU2VydmljZTogQWRtaW5TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHVzZXJEYXRhU2VydmljZTogVXNlckRhdGFTZXJ2aWNlXG4gICAgKSB7IH1cblxuICAgIGdldFVzZXIoKSB7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UuZ2V0Q3VycmVudFVzZXIoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudF91c2VyJykpLl9pZClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICB1c2VyID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLmxvZ1VzZXJPdXQoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyg8YW55PmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBnZXRVc2VycygpIHtcbiAgICAgICAgdGhpcy5hZG1pblNlcnZpY2UuZ2V0QWxsVXNlcnMoKVxuICAgICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgIHVzZXJzID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWxsIFVzZXJzOiAnLCB1c2Vycyk7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VyRGF0YUxpc3QgPSB1c2VycztcbiAgICAgICAgICAgICAgICB0aGlzLmFycmF5T2ZVc2Vyc0tleXMgPSBPYmplY3Qua2V5cyh1c2Vycyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0aFNlcnZpY2UubG9nVXNlck91dCgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDxhbnk+ZXJyb3IpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJMTFQodW5peCl7XG4gICAgICAgIHJldHVybiBtb21lbnQodW5peCkuZm9ybWF0KCdMTEwnKTtcbiAgICB9XG5cblxuICAgIGdldFNpbmdsZVVzZXIodXNlcklkOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy51c2VyRGF0YVNlcnZpY2UuZ2V0U2luZ2xlVXNlcih1c2VySWQpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgdXNlciA9PiB7XG4gICAgICAgICAgICAgICAgaWYodXNlci5faWQgPT0gdGhpcy5zZWxlY3RlZFVzZXJJZCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTaW5nbGUgVXNlcjogJywgdXNlcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2VyID0gdXNlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDxhbnk+ZXJyb3IpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudF91c2VyJykpO1xuICAgICAgICB0aGlzLmdldFVzZXIoKTtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
