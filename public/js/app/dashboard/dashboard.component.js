"use strict";var __decorate=this&&this.__decorate||function(e,t,o,i){var r,c=arguments.length,n=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(n=(c<3?r(n):c>3?r(t,o,n):r(t,o))||n);return c>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),auth_service_1=require("../shared/services/auth.service"),notification_service_1=require("../shared/services/notification.service"),socket_service_1=require("../shared/services/socket.service"),DashboardComponent=function(){function e(e,t,o,i){this.authService=e,this.router=t,this.socket=o,this.noticeService=i,this.profileToggled=!1,this.inboxToggled=!1}return e.prototype.checkMenuStyle=function(e){this.currentSession=e},e.prototype.logout=function(){this.authService.logUserOut()},e.prototype.getUser=function(){var e=this;this.authService.getCurrentUser(JSON.parse(localStorage.getItem("current_user"))._id).subscribe(function(t){e.currentUserRole=t.role,e.currentUser=t},function(t){e.authService.logUserOut(),console.log(t)})},e.prototype.getNotification=function(e){var t=this;this.noticeService.getThree().subscribe(function(o){console.log("notifications",o),t.notifications=o,e()},function(t){console.log(t),e()})},e.prototype.getNotificationCount=function(){var e=this;this.noticeService.getCount().subscribe(function(t){e.noticeCount=t},function(e){console.log(e)})},e.prototype.ngOnInit=function(){this.currentUser=JSON.parse(localStorage.getItem("current_user")),this.getUser();var e=this;this.getNotification(function(){e.socket.syncById("notification",e.currentUser._id,function(t){this.notifications.unshift(t),this.notifications.pop(),t.read||e.noticeCount++})}),this.getNotificationCount()},e.prototype.ngOnDestroy=function(){this.socket.unsyncById("notification",this.currentUser._id)},e=__decorate([core_1.Component({moduleId:module.id,selector:"yeah-dashboard",templateUrl:"dashboard.component.html",directives:[router_1.ROUTER_DIRECTIVES],providers:[auth_service_1.AuthService,socket_service_1.SocketService,notification_service_1.NotificationService],styleUrls:["dashboard.style.css"]}),__metadata("design:paramtypes",[auth_service_1.AuthService,router_1.Router,socket_service_1.SocketService,notification_service_1.NotificationService])],e)}();exports.DashboardComponent=DashboardComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50LmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOlsiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwicmVxdWlyZSIsInJvdXRlcl8xIiwiYXV0aF9zZXJ2aWNlXzEiLCJub3RpZmljYXRpb25fc2VydmljZV8xIiwic29ja2V0X3NlcnZpY2VfMSIsIkRhc2hib2FyZENvbXBvbmVudCIsImF1dGhTZXJ2aWNlIiwicm91dGVyIiwic29ja2V0Iiwibm90aWNlU2VydmljZSIsInByb2ZpbGVUb2dnbGVkIiwiaW5ib3hUb2dnbGVkIiwicHJvdG90eXBlIiwiY2hlY2tNZW51U3R5bGUiLCJpdGVtIiwiY3VycmVudFNlc3Npb24iLCJsb2dvdXQiLCJsb2dVc2VyT3V0IiwiZ2V0VXNlciIsIl90aGlzIiwiZ2V0Q3VycmVudFVzZXIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiX2lkIiwic3Vic2NyaWJlIiwidXNlciIsImN1cnJlbnRVc2VyUm9sZSIsInJvbGUiLCJjdXJyZW50VXNlciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImdldE5vdGlmaWNhdGlvbiIsImNiIiwiZ2V0VGhyZWUiLCJub3RpY2VzIiwibm90aWZpY2F0aW9ucyIsImdldE5vdGlmaWNhdGlvbkNvdW50Iiwic2VsZiIsImdldENvdW50IiwiY291bnQiLCJub3RpY2VDb3VudCIsIm5nT25Jbml0Iiwic3luY0J5SWQiLCJub3RpY2UiLCJ1bnNoaWZ0IiwicG9wIiwicmVhZCIsIm5nT25EZXN0cm95IiwidW5zeW5jQnlJZCIsIkNvbXBvbmVudCIsIm1vZHVsZUlkIiwibW9kdWxlIiwiaWQiLCJzZWxlY3RvciIsInRlbXBsYXRlVXJsIiwiZGlyZWN0aXZlcyIsIlJPVVRFUl9ESVJFQ1RJVkVTIiwicHJvdmlkZXJzIiwiQXV0aFNlcnZpY2UiLCJTb2NrZXRTZXJ2aWNlIiwiTm90aWZpY2F0aW9uU2VydmljZSIsInN0eWxlVXJscyIsIlJvdXRlciIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBQ0EsSUFBSUEsWUFBY0MsTUFBUUEsS0FBS0QsWUFBZSxTQUFVRSxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQUtILEVBQUksRUFBSUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFLTSxHQUFLSixFQUFFSCxFQUFRQyxLQUFTTSxFQUNoSixPQUFPSCxHQUFJLEdBQUtHLEdBQUtDLE9BQU9LLGVBQWViLEVBQVFDLEVBQUtNLEdBQUlBLEdBRTVETyxXQUFjaEIsTUFBUUEsS0FBS2dCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpOLFVBQW9ELGtCQUFyQkEsU0FBUU8sU0FBeUIsTUFBT1AsU0FBUU8sU0FBU0YsRUFBR0MsSUNSMUdFLE9BQUFDLFFBQTZDLGlCQUM3Q0MsU0FBQUQsUUFBMEMsbUJBRTFDRSxlQUFBRixRQUE0QixtQ0FDNUJHLHVCQUFBSCxRQUFvQywyQ0FDcENJLGlCQUFBSixRQUE4QixxQ0FjOUJLLG1CQUFBLFdBVUksUUFBQUEsR0FDWUMsRUFDQUMsRUFDQUMsRUFDQUMsR0FIQTlCLEtBQUEyQixZQUFBQSxFQUNBM0IsS0FBQTRCLE9BQUFBLEVBQ0E1QixLQUFBNkIsT0FBQUEsRUFDQTdCLEtBQUE4QixjQUFBQSxFQVhaOUIsS0FBQStCLGdCQUEwQixFQUMxQi9CLEtBQUFnQyxjQUF3QixFQW9GNUIsTUF2RUlOLEdBQUFPLFVBQUFDLGVBQUEsU0FBZUMsR0FDWG5DLEtBQUtvQyxlQUFpQkQsR0FHMUJULEVBQUFPLFVBQUFJLE9BQUEsV0FHSXJDLEtBQUsyQixZQUFZVyxjQUdyQlosRUFBQU8sVUFBQU0sUUFBQSxXQUFBLEdBQUFDLEdBQUF4QyxJQUNJQSxNQUFLMkIsWUFBWWMsZUFBZUMsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxpQkFBaUJDLEtBQzVFQyxVQUNELFNBQUFDLEdBQ0lSLEVBQUtTLGdCQUFrQkQsRUFBS0UsS0FDNUJWLEVBQUtXLFlBQWNILEdBRXZCLFNBQUFJLEdBQ0laLEVBQUtiLFlBQVlXLGFBQ2pCZSxRQUFRQyxJQUFTRixNQUk3QjFCLEVBQUFPLFVBQUFzQixnQkFBQSxTQUFnQkMsR0FBaEIsR0FBQWhCLEdBQUF4QyxJQUVJQSxNQUFLOEIsY0FBYzJCLFdBQ2RWLFVBQ0QsU0FBQVcsR0FDSUwsUUFBUUMsSUFBSSxnQkFBaUJJLEdBQzdCbEIsRUFBS21CLGNBQWdCRCxFQUNyQkYsS0FFSixTQUFBSixHQUNJQyxRQUFRQyxJQUFTRixHQUNqQkksT0FJWjlCLEVBQUFPLFVBQUEyQixxQkFBQSxXQUNJLEdBQUlDLEdBQU83RCxJQUNYQSxNQUFLOEIsY0FBY2dDLFdBQ2RmLFVBQ0QsU0FBQWdCLEdBQ0lGLEVBQUtHLFlBQWNELEdBRXZCLFNBQUFYLEdBQ0lDLFFBQVFDLElBQVNGLE1BSTdCMUIsRUFBQU8sVUFBQWdDLFNBQUEsV0FDSWpFLEtBQUttRCxZQUFjVCxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGlCQUNuRDdDLEtBQUt1QyxTQUNMLElBQUlzQixHQUFPN0QsSUFDWEEsTUFBS3VELGdCQUFnQixXQUVqQk0sRUFBS2hDLE9BQU9xQyxTQUFTLGVBQWdCTCxFQUFLVixZQUFZTCxJQUFLLFNBQVNxQixHQUNoRW5FLEtBQUsyRCxjQUFjUyxRQUFRRCxHQUMzQm5FLEtBQUsyRCxjQUFjVSxNQUNmRixFQUFPRyxNQUNQVCxFQUFLRyxrQkFJakJoRSxLQUFLNEQsd0JBSVRsQyxFQUFBTyxVQUFBc0MsWUFBQSxXQUNJdkUsS0FBSzZCLE9BQU8yQyxXQUFXLGVBQWdCeEUsS0FBS21ELFlBQVlMLE1BL0ZoRXBCLEVBQUEzQixZQUFDcUIsT0FBQXFELFdBQ0dDLFNBQVVDLE9BQU9DLEdBQ2pCQyxTQUFVLGlCQUNWQyxZQUFhLDJCQUNiQyxZQUFhekQsU0FBQTBELG1CQUNiQyxXQUFZMUQsZUFBQTJELFlBQWF6RCxpQkFBQTBELGNBQWUzRCx1QkFBQTRELHFCQUN4Q0MsV0FBWSx5QkQ2RVJyRSxXQUFXLHFCQUFzQk8sZUFBZTJELFlBQWE1RCxTQUFTZ0UsT0FBUTdELGlCQUFpQjBELGNBQWUzRCx1QkFBdUI0RCx1QkFDdEkxRCxLQzNFTTZELFNBQUE3RCxtQkFBa0JBIiwiZmlsZSI6ImRhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2NvcmUnKTtcbnZhciByb3V0ZXJfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL3JvdXRlcicpO1xudmFyIGF1dGhfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vc2hhcmVkL3NlcnZpY2VzL2F1dGguc2VydmljZScpO1xudmFyIG5vdGlmaWNhdGlvbl9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9zaGFyZWQvc2VydmljZXMvbm90aWZpY2F0aW9uLnNlcnZpY2UnKTtcbnZhciBzb2NrZXRfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vc2hhcmVkL3NlcnZpY2VzL3NvY2tldC5zZXJ2aWNlJyk7XG52YXIgRGFzaGJvYXJkQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEYXNoYm9hcmRDb21wb25lbnQoYXV0aFNlcnZpY2UsIHJvdXRlciwgc29ja2V0LCBub3RpY2VTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UgPSBhdXRoU2VydmljZTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuICAgICAgICB0aGlzLm5vdGljZVNlcnZpY2UgPSBub3RpY2VTZXJ2aWNlO1xuICAgICAgICB0aGlzLnByb2ZpbGVUb2dnbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5ib3hUb2dnbGVkID0gZmFsc2U7XG4gICAgfVxuICAgIERhc2hib2FyZENvbXBvbmVudC5wcm90b3R5cGUuY2hlY2tNZW51U3R5bGUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gaXRlbTtcbiAgICB9O1xuICAgIERhc2hib2FyZENvbXBvbmVudC5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB0aGUgc2VydmljZSB3aWxsIGRlbGV0ZSB1c2VyIGRhdGEgYW5kIHRva2VuIGluIGxvY2FsU3RvcmFnZVxuICAgICAgICAvLyBhbmQgYnJpbmcgdXNlciBvdXQgb2YgdGhlIGRhc2hib2FyZFxuICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLmxvZ1VzZXJPdXQoKTtcbiAgICB9O1xuICAgIERhc2hib2FyZENvbXBvbmVudC5wcm90b3R5cGUuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5hdXRoU2VydmljZS5nZXRDdXJyZW50VXNlcihKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X3VzZXInKSkuX2lkKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAodXNlcikge1xuICAgICAgICAgICAgX3RoaXMuY3VycmVudFVzZXJSb2xlID0gdXNlci5yb2xlO1xuICAgICAgICAgICAgX3RoaXMuY3VycmVudFVzZXIgPSB1c2VyO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIF90aGlzLmF1dGhTZXJ2aWNlLmxvZ1VzZXJPdXQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBEYXNoYm9hcmRDb21wb25lbnQucHJvdG90eXBlLmdldE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMubm90aWNlU2VydmljZS5nZXRUaHJlZSgpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChub3RpY2VzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbm90aWZpY2F0aW9ucycsIG5vdGljZXMpO1xuICAgICAgICAgICAgX3RoaXMubm90aWZpY2F0aW9ucyA9IG5vdGljZXM7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgRGFzaGJvYXJkQ29tcG9uZW50LnByb3RvdHlwZS5nZXROb3RpZmljYXRpb25Db3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLm5vdGljZVNlcnZpY2UuZ2V0Q291bnQoKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoY291bnQpIHtcbiAgICAgICAgICAgIHNlbGYubm90aWNlQ291bnQgPSBjb3VudDtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgRGFzaGJvYXJkQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRfdXNlcicpKTtcbiAgICAgICAgdGhpcy5nZXRVc2VyKCk7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5nZXROb3RpZmljYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy9MaXN0ZW4gdG8gdXBkYXRlcyBhZnRlciBsb2FkaW5nIHRoZSBmaXJzdCB0aHJlZSBub3RpZmljYXRpb25zXG4gICAgICAgICAgICBzZWxmLnNvY2tldC5zeW5jQnlJZCgnbm90aWZpY2F0aW9uJywgc2VsZi5jdXJyZW50VXNlci5faWQsIGZ1bmN0aW9uIChub3RpY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMudW5zaGlmdChub3RpY2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5vdGljZS5yZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubm90aWNlQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0Tm90aWZpY2F0aW9uQ291bnQoKTtcbiAgICB9O1xuICAgIERhc2hib2FyZENvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc29ja2V0LnVuc3luY0J5SWQoJ25vdGlmaWNhdGlvbicsIHRoaXMuY3VycmVudFVzZXIuX2lkKTtcbiAgICB9O1xuICAgIERhc2hib2FyZENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcbiAgICAgICAgICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgICAgICAgICBzZWxlY3RvcjogJ3llYWgtZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZGFzaGJvYXJkLmNvbXBvbmVudC5odG1sJyxcbiAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtyb3V0ZXJfMS5ST1VURVJfRElSRUNUSVZFU10sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFthdXRoX3NlcnZpY2VfMS5BdXRoU2VydmljZSwgc29ja2V0X3NlcnZpY2VfMS5Tb2NrZXRTZXJ2aWNlLCBub3RpZmljYXRpb25fc2VydmljZV8xLk5vdGlmaWNhdGlvblNlcnZpY2VdLFxuICAgICAgICAgICAgc3R5bGVVcmxzOiBbJ2Rhc2hib2FyZC5zdHlsZS5jc3MnXVxuICAgICAgICB9KSwgXG4gICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW2F1dGhfc2VydmljZV8xLkF1dGhTZXJ2aWNlLCByb3V0ZXJfMS5Sb3V0ZXIsIHNvY2tldF9zZXJ2aWNlXzEuU29ja2V0U2VydmljZSwgbm90aWZpY2F0aW9uX3NlcnZpY2VfMS5Ob3RpZmljYXRpb25TZXJ2aWNlXSlcbiAgICBdLCBEYXNoYm9hcmRDb21wb25lbnQpO1xuICAgIHJldHVybiBEYXNoYm9hcmRDb21wb25lbnQ7XG59KCkpO1xuZXhwb3J0cy5EYXNoYm9hcmRDb21wb25lbnQgPSBEYXNoYm9hcmRDb21wb25lbnQ7XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBST1VURVJfRElSRUNUSVZFUywgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tICcuLi9zaGFyZWQvc2VydmljZXMvYXV0aC5zZXJ2aWNlJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICcuLi9zaGFyZWQvc2VydmljZXMvbm90aWZpY2F0aW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgU29ja2V0U2VydmljZSB9IGZyb20gJy4uL3NoYXJlZC9zZXJ2aWNlcy9zb2NrZXQuc2VydmljZSc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vc2hhcmVkL3R5cGVzL3VzZXInO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uIH0gZnJvbSAnLi4vc2hhcmVkL3R5cGVzL25vdGlmaWNhdGlvbic7XG5cblxuQENvbXBvbmVudCh7XG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBzZWxlY3RvcjogJ3llYWgtZGFzaGJvYXJkJyxcbiAgICB0ZW1wbGF0ZVVybDogJ2Rhc2hib2FyZC5jb21wb25lbnQuaHRtbCcsXG4gICAgZGlyZWN0aXZlczogW1JPVVRFUl9ESVJFQ1RJVkVTXSxcbiAgICBwcm92aWRlcnM6IFtBdXRoU2VydmljZSwgU29ja2V0U2VydmljZSwgTm90aWZpY2F0aW9uU2VydmljZV0sXG4gICAgc3R5bGVVcmxzOiBbJ2Rhc2hib2FyZC5zdHlsZS5jc3MnXVxufSlcblxuZXhwb3J0IGNsYXNzIERhc2hib2FyZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95e1xuICAgIC8vIHNlcnZlIGZvciB0aGUgdHdvIGRyb3Bkb3duIGxpc3QgaW4gdG9wLXJpZ2h0IG9mIHRoZSBuYXZiYXJcbiAgICBjdXJyZW50VXNlcjogVXNlcjtcbiAgICBwcm9maWxlVG9nZ2xlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGluYm94VG9nZ2xlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGN1cnJlbnRTZXNzaW9uOiBzdHJpbmc7XG4gICAgY3VycmVudFVzZXJSb2xlOiBzdHJpbmc7XG4gICAgbm90aWZpY2F0aW9uczogQXJyYXk8Tm90aWZpY2F0aW9uPjtcbiAgICBub3RpY2VDb3VudDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgYXV0aFNlcnZpY2U6IEF1dGhTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHJvdXRlcjogUm91dGVyLFxuICAgICAgICBwcml2YXRlIHNvY2tldDogU29ja2V0U2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBub3RpY2VTZXJ2aWNlOiBOb3RpZmljYXRpb25TZXJ2aWNlXG4gICAgKXt9XG5cbiAgICBjaGVja01lbnVTdHlsZShpdGVtOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbiA9IGl0ZW07XG4gICAgfVxuXG4gICAgbG9nb3V0KCkge1xuICAgICAgICAvLyB0aGUgc2VydmljZSB3aWxsIGRlbGV0ZSB1c2VyIGRhdGEgYW5kIHRva2VuIGluIGxvY2FsU3RvcmFnZVxuICAgICAgICAvLyBhbmQgYnJpbmcgdXNlciBvdXQgb2YgdGhlIGRhc2hib2FyZFxuICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLmxvZ1VzZXJPdXQoKVxuICAgIH1cblxuICAgIGdldFVzZXIoKSB7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UuZ2V0Q3VycmVudFVzZXIoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudF91c2VyJykpLl9pZClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICB1c2VyID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyUm9sZSA9IHVzZXIucm9sZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLmxvZ1VzZXJPdXQoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyg8YW55PmVycm9yKVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0Tm90aWZpY2F0aW9uKGNiKSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5ub3RpY2VTZXJ2aWNlLmdldFRocmVlKClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICBub3RpY2VzID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbm90aWZpY2F0aW9ucycsIG5vdGljZXMpXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gbm90aWNlcztcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyg8YW55PmVycm9yKVxuICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXROb3RpZmljYXRpb25Db3VudCgpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLm5vdGljZVNlcnZpY2UuZ2V0Q291bnQoKVxuICAgICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgIGNvdW50ID0+IHtcbiAgICAgICAgICAgICAgICBzZWxmLm5vdGljZUNvdW50ID0gY291bnQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDxhbnk+ZXJyb3IpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRfdXNlcicpKTtcbiAgICAgICAgdGhpcy5nZXRVc2VyKCk7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5nZXROb3RpZmljYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvL0xpc3RlbiB0byB1cGRhdGVzIGFmdGVyIGxvYWRpbmcgdGhlIGZpcnN0IHRocmVlIG5vdGlmaWNhdGlvbnNcbiAgICAgICAgICAgIHNlbGYuc29ja2V0LnN5bmNCeUlkKCdub3RpZmljYXRpb24nLCBzZWxmLmN1cnJlbnRVc2VyLl9pZCwgZnVuY3Rpb24obm90aWNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnVuc2hpZnQobm90aWNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYoIW5vdGljZS5yZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubm90aWNlQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsgICBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0Tm90aWZpY2F0aW9uQ291bnQoKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc29ja2V0LnVuc3luY0J5SWQoJ25vdGlmaWNhdGlvbicsIHRoaXMuY3VycmVudFVzZXIuX2lkKTtcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
