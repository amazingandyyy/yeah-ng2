"use strict";var __decorate=this&&this.__decorate||function(e,t,o,n){var r,c=arguments.length,i=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(c<3?r(i):c>3?r(t,o,i):r(t,o))||i);return c>3&&i&&Object.defineProperty(t,o,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),lodash_1=require("lodash"),SocketService=function(){function e(){var e=require("socket-client");this.socket=e.connect()}return e.prototype.addEventListener=function(e){this.socket.on(e,function(e){console.log("things from socket",e)})},e.prototype.removeEventListener=function(e){this.socket.removeAllListeners(e)},e.prototype.syncById=function(e,t,o){this.socket.on(e+":save:"+t,function(e){o(e)})},e.prototype.unsyncById=function(e,t,o){this.socket.removeAllListeners(e+":save:"+t)},e.prototype.syncArray=function(e,t,o){o=o||function(){},this.socket.on(e+":save",function(e){var n=lodash_1["default"].find(t,{_id:e._id}),r=t.indexOf(n),c="created";n?(t.splice(r,1,e),c="updated"):t.push(e),o(c,e,t)}),this.socket.on(e+":remove",function(e){var n="deleted";lodash_1["default"].remove(t,{_id:e._id}),o(n,e,t)})},e.prototype.unsyncArray=function(e){this.socket.removeAllListeners(e+":save"),this.socket.removeAllListeners(e+":remove")},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],e)}();exports.SocketService=SocketService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlZC9zZXJ2aWNlcy9zb2NrZXQuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9zb2NrZXQuc2VydmljZS50cyJdLCJuYW1lcyI6WyJfX2RlY29yYXRlIiwidGhpcyIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiZCIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiaSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJjb3JlXzEiLCJyZXF1aXJlIiwibG9kYXNoXzEiLCJTb2NrZXRTZXJ2aWNlIiwiaW8iLCJzb2NrZXQiLCJjb25uZWN0IiwicHJvdG90eXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwib24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJzeW5jQnlJZCIsIm1vZGVsTmFtZSIsImlkIiwiY2IiLCJpdGVtIiwidW5zeW5jQnlJZCIsInN5bmNBcnJheSIsImFycmF5Iiwib2xkSXRlbSIsImZpbmQiLCJfaWQiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJwdXNoIiwicmVtb3ZlIiwidW5zeW5jQXJyYXkiLCJJbmplY3RhYmxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFDQSxJQUFJQSxZQUFjQyxNQUFRQSxLQUFLRCxZQUFlLFNBQVVFLEVBQVlDLEVBQVFDLEVBQUtDLEdBQzdFLEdBQTJIQyxHQUF2SEMsRUFBSUMsVUFBVUMsT0FBUUMsRUFBSUgsRUFBSSxFQUFJSixFQUFrQixPQUFURSxFQUFnQkEsRUFBT00sT0FBT0MseUJBQXlCVCxFQUFRQyxHQUFPQyxDQUNySCxJQUF1QixnQkFBWlEsVUFBb0Qsa0JBQXJCQSxTQUFRQyxTQUF5QkosRUFBSUcsUUFBUUMsU0FBU1osRUFBWUMsRUFBUUMsRUFBS0MsT0FDcEgsS0FBSyxHQUFJVSxHQUFJYixFQUFXTyxPQUFTLEVBQUdNLEdBQUssRUFBR0EsS0FBU1QsRUFBSUosRUFBV2EsTUFBSUwsR0FBS0gsRUFBSSxFQUFJRCxFQUFFSSxHQUFLSCxFQUFJLEVBQUlELEVBQUVILEVBQVFDLEVBQUtNLEdBQUtKLEVBQUVILEVBQVFDLEtBQVNNLEVBQ2hKLE9BQU9ILEdBQUksR0FBS0csR0FBS0MsT0FBT0ssZUFBZWIsRUFBUUMsRUFBS00sR0FBSUEsR0FFNURPLFdBQWNoQixNQUFRQSxLQUFLZ0IsWUFBZSxTQUFVQyxFQUFHQyxHQUN2RCxHQUF1QixnQkFBWk4sVUFBb0Qsa0JBQXJCQSxTQUFRTyxTQUF5QixNQUFPUCxTQUFRTyxTQUFTRixFQUFHQyxJQ1IxR0UsT0FBQUMsUUFBMkIsaUJBRTNCQyxTQUFBRCxRQUFjLFVBSWRFLGNBQUEsV0FHQyxRQUFBQSxLQUNDLEdBQU1DLEdBQUtILFFBQVEsZ0JBQ25CckIsTUFBS3lCLE9BQVNELEVBQUdFLFVBcUVuQixNQWxFQ0gsR0FBQUksVUFBQUMsaUJBQUEsU0FBaUJDLEdBQ2hCN0IsS0FBS3lCLE9BQU9LLEdBQUdELEVBQU8sU0FBU0UsR0FDOUJDLFFBQVFDLElBQUkscUJBQXNCRixNQUlwQ1IsRUFBQUksVUFBQU8sb0JBQUEsU0FBb0JMLEdBQ25CN0IsS0FBS3lCLE9BQU9VLG1CQUFtQk4sSUFJaENOLEVBQUFJLFVBQUFTLFNBQUEsU0FBU0MsRUFBbUJDLEVBQVlDLEdBQ3ZDdkMsS0FBS3lCLE9BQU9LLEdBQUdPLEVBQVksU0FBV0MsRUFBSSxTQUFVRSxHQUMvQ0QsRUFBR0MsTUFJVGpCLEVBQUFJLFVBQUFjLFdBQUEsU0FBV0osRUFBbUJDLEVBQVlDLEdBQ3hDdkMsS0FBS3lCLE9BQU9VLG1CQUFtQkUsRUFBWSxTQUFXQyxJQUl4RGYsRUFBQUksVUFBQWUsVUFBQSxTQUFVTCxFQUFtQk0sRUFBbUJKLEdBQ3pDQSxFQUFLQSxHQUFNLGFBS2R2QyxLQUFLeUIsT0FBT0ssR0FBR08sRUFBWSxRQUFTLFNBQVVHLEdBRTVDLEdBQUlJLEdBQVV0QixTQUFBQSxXQUFFdUIsS0FBS0YsR0FBUUcsSUFBS04sRUFBS00sTUFDbkNDLEVBQVFKLEVBQU1LLFFBQVFKLEdBQ3RCZixFQUFRLFNBSVJlLElBQ0ZELEVBQU1NLE9BQU9GLEVBQU8sRUFBR1AsR0FDdkJYLEVBQVEsV0FFUmMsRUFBTU8sS0FBS1YsR0FHYkQsRUFBR1YsRUFBT1csRUFBTUcsS0FNbEIzQyxLQUFLeUIsT0FBT0ssR0FBR08sRUFBWSxVQUFXLFNBQVVHLEdBQzlDLEdBQUlYLEdBQVEsU0FDWlAsVUFBQUEsV0FBRTZCLE9BQU9SLEdBQVFHLElBQUtOLEVBQUtNLE1BQzNCUCxFQUFHVixFQUFPVyxFQUFNRyxNQVNuQnBCLEVBQUFJLFVBQUF5QixZQUFBLFNBQVlmLEdBQ1JyQyxLQUFLeUIsT0FBT1UsbUJBQW1CRSxFQUFZLFNBQzNDckMsS0FBS3lCLE9BQU9VLG1CQUFtQkUsRUFBWSxZQXhFbkRkLEVBQUF4QixZQUFDcUIsT0FBQWlDLGFEd0VPckMsV0FBVyx5QkFDWk8sS0N4RU0rQixTQUFBL0IsY0FBYUEiLCJmaWxlIjoic2hhcmVkL3NlcnZpY2VzL3NvY2tldC5zZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2NvcmUnKTtcbi8vIGltcG9ydCBpbyBmcm9tICdzb2NrZXQtY2xpZW50JztcbnZhciBsb2Rhc2hfMSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIFNvY2tldFNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNvY2tldFNlcnZpY2UoKSB7XG4gICAgICAgIHZhciBpbyA9IHJlcXVpcmUoJ3NvY2tldC1jbGllbnQnKTsgLy9odHRwczovL2dpdGh1Yi5jb20vc29ja2V0aW8vc29ja2V0LmlvLWNsaWVudFxuICAgICAgICB0aGlzLnNvY2tldCA9IGlvLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgLy8gQ3VzdG9taXplZCBFdmVudHMsIGFkZEV2ZW50IE9uSW5pdCwgcmVtb3ZlIE9uRGVzdHJveVxuICAgIFNvY2tldFNlcnZpY2UucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQub24oZXZlbnQsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpbmdzIGZyb20gc29ja2V0JywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU29ja2V0U2VydmljZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xuICAgIH07XG4gICAgLy8gVXBkYXRlIGRvY3VtZW50IGJ5IGlkXG4gICAgU29ja2V0U2VydmljZS5wcm90b3R5cGUuc3luY0J5SWQgPSBmdW5jdGlvbiAobW9kZWxOYW1lLCBpZCwgY2IpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQub24obW9kZWxOYW1lICsgJzpzYXZlOicgKyBpZCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGNiKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFNvY2tldFNlcnZpY2UucHJvdG90eXBlLnVuc3luY0J5SWQgPSBmdW5jdGlvbiAobW9kZWxOYW1lLCBpZCwgY2IpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKG1vZGVsTmFtZSArICc6c2F2ZTonICsgaWQpO1xuICAgIH07XG4gICAgLy8gU3luYyBhcnJheVxuICAgIFNvY2tldFNlcnZpY2UucHJvdG90eXBlLnN5bmNBcnJheSA9IGZ1bmN0aW9uIChtb2RlbE5hbWUsIGFycmF5LCBjYikge1xuICAgICAgICBjYiA9IGNiIHx8IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN5bmNzIGl0ZW0gY3JlYXRpb24vdXBkYXRlcyBvbiAnbW9kZWw6c2F2ZSdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc29ja2V0Lm9uKG1vZGVsTmFtZSArICc6c2F2ZScsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgb2xkSXRlbSA9IGxvZGFzaF8xLmRlZmF1bHQuZmluZChhcnJheSwgeyBfaWQ6IGl0ZW0uX2lkIH0pO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gYXJyYXkuaW5kZXhPZihvbGRJdGVtKTtcbiAgICAgICAgICAgIHZhciBldmVudCA9ICdjcmVhdGVkJztcbiAgICAgICAgICAgIC8vIHJlcGxhY2Ugb2xkSXRlbSBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBqdXN0IGFkZCBpdGVtIHRvIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgICAgICBpZiAob2xkSXRlbSkge1xuICAgICAgICAgICAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSwgaXRlbSk7XG4gICAgICAgICAgICAgICAgZXZlbnQgPSAndXBkYXRlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2IoZXZlbnQsIGl0ZW0sIGFycmF5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTeW5jcyByZW1vdmVkIGl0ZW1zIG9uICdtb2RlbDpyZW1vdmUnXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNvY2tldC5vbihtb2RlbE5hbWUgKyAnOnJlbW92ZScsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSAnZGVsZXRlZCc7XG4gICAgICAgICAgICBsb2Rhc2hfMS5kZWZhdWx0LnJlbW92ZShhcnJheSwgeyBfaWQ6IGl0ZW0uX2lkIH0pO1xuICAgICAgICAgICAgY2IoZXZlbnQsIGl0ZW0sIGFycmF5KTtcbiAgICAgICAgfSk7XG4gICAgfTsgLy9FbmQgb2Ygc3luY1VwZGF0ZXNcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGxpc3RlbmVycyBmb3IgYSBtb2RlbHMgdXBkYXRlcyBvbiB0aGUgdGhpcy5zb2NrZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtb2RlbE5hbWVcbiAgICAgKi9cbiAgICBTb2NrZXRTZXJ2aWNlLnByb3RvdHlwZS51bnN5bmNBcnJheSA9IGZ1bmN0aW9uIChtb2RlbE5hbWUpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKG1vZGVsTmFtZSArICc6c2F2ZScpO1xuICAgICAgICB0aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMobW9kZWxOYW1lICsgJzpyZW1vdmUnKTtcbiAgICB9O1xuICAgIFNvY2tldFNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLkluamVjdGFibGUoKSwgXG4gICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW10pXG4gICAgXSwgU29ja2V0U2VydmljZSk7XG4gICAgcmV0dXJuIFNvY2tldFNlcnZpY2U7XG59KCkpO1xuZXhwb3J0cy5Tb2NrZXRTZXJ2aWNlID0gU29ja2V0U2VydmljZTtcbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbi8vIGltcG9ydCBpbyBmcm9tICdzb2NrZXQtY2xpZW50JztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFNvY2tldFNlcnZpY2Uge1xuXHRzb2NrZXQ6IGFueTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRjb25zdCBpbyA9IHJlcXVpcmUoJ3NvY2tldC1jbGllbnQnKTsgLy9odHRwczovL2dpdGh1Yi5jb20vc29ja2V0aW8vc29ja2V0LmlvLWNsaWVudFxuXHRcdHRoaXMuc29ja2V0ID0gaW8uY29ubmVjdCgpO1xuXHR9XG5cdC8vIEN1c3RvbWl6ZWQgRXZlbnRzLCBhZGRFdmVudCBPbkluaXQsIHJlbW92ZSBPbkRlc3Ryb3lcblx0YWRkRXZlbnRMaXN0ZW5lcihldmVudDogc3RyaW5nKSB7XG5cdFx0dGhpcy5zb2NrZXQub24oZXZlbnQsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdGNvbnNvbGUubG9nKCd0aGluZ3MgZnJvbSBzb2NrZXQnLCBkYXRhKTtcblx0XHR9KTtcblx0fVxuXG5cdHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQ6IHN0cmluZykge1xuXHRcdHRoaXMuc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycyhldmVudCk7XG5cdH1cblxuXHQvLyBVcGRhdGUgZG9jdW1lbnQgYnkgaWRcblx0c3luY0J5SWQobW9kZWxOYW1lOiBzdHJpbmcsIGlkOiBzdHJpbmcsIGNiOiBhbnkpIHtcblx0XHR0aGlzLnNvY2tldC5vbihtb2RlbE5hbWUgKyAnOnNhdmU6JyArIGlkLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICBjYihpdGVtKTtcblx0ICAgIH0pO1xuXHR9XG5cblx0dW5zeW5jQnlJZChtb2RlbE5hbWU6IHN0cmluZywgaWQ6IHN0cmluZywgY2I6IGFueSkge1xuXHRcdFx0dGhpcy5zb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKG1vZGVsTmFtZSArICc6c2F2ZTonICsgaWQpO1xuXHR9XG5cblx0Ly8gU3luYyBhcnJheVxuXHRzeW5jQXJyYXkobW9kZWxOYW1lOiBzdHJpbmcsIGFycmF5OiBBcnJheTxhbnk+LCBjYjogYW55KSB7XG4gICAgICAgIGNiID0gY2IgfHwgZnVuY3Rpb24oKXt9O1xuXG5cdCAgICAvKipcblx0ICAgICAqIFN5bmNzIGl0ZW0gY3JlYXRpb24vdXBkYXRlcyBvbiAnbW9kZWw6c2F2ZSdcblx0ICAgICAqL1xuXHQgICAgdGhpcy5zb2NrZXQub24obW9kZWxOYW1lICsgJzpzYXZlJywgZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgXG5cdCAgICAgIHZhciBvbGRJdGVtID0gXy5maW5kKGFycmF5LCB7X2lkOiBpdGVtLl9pZH0pO1xuXHQgICAgICB2YXIgaW5kZXggPSBhcnJheS5pbmRleE9mKG9sZEl0ZW0pO1xuXHQgICAgICB2YXIgZXZlbnQgPSAnY3JlYXRlZCc7XG5cblx0ICAgICAgLy8gcmVwbGFjZSBvbGRJdGVtIGlmIGl0IGV4aXN0c1xuXHQgICAgICAvLyBvdGhlcndpc2UganVzdCBhZGQgaXRlbSB0byB0aGUgY29sbGVjdGlvblxuXHQgICAgICBpZiAob2xkSXRlbSkge1xuXHQgICAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSwgaXRlbSk7XG5cdCAgICAgICAgZXZlbnQgPSAndXBkYXRlZCc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYXJyYXkucHVzaChpdGVtKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGNiKGV2ZW50LCBpdGVtLCBhcnJheSk7XG5cdCAgICB9KTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBTeW5jcyByZW1vdmVkIGl0ZW1zIG9uICdtb2RlbDpyZW1vdmUnXG5cdCAgICAgKi9cblx0ICAgIHRoaXMuc29ja2V0Lm9uKG1vZGVsTmFtZSArICc6cmVtb3ZlJywgZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgdmFyIGV2ZW50ID0gJ2RlbGV0ZWQnO1xuXHQgICAgICBfLnJlbW92ZShhcnJheSwge19pZDogaXRlbS5faWR9KTtcblx0ICAgICAgY2IoZXZlbnQsIGl0ZW0sIGFycmF5KTtcblx0ICAgIH0pO1xuXHR9Ly9FbmQgb2Ygc3luY1VwZGF0ZXNcblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmVzIGxpc3RlbmVycyBmb3IgYSBtb2RlbHMgdXBkYXRlcyBvbiB0aGUgdGhpcy5zb2NrZXRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gbW9kZWxOYW1lXG4gICAgICAgKi9cbiAgICB1bnN5bmNBcnJheShtb2RlbE5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMobW9kZWxOYW1lICsgJzpzYXZlJyk7XG4gICAgICAgIHRoaXMuc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycyhtb2RlbE5hbWUgKyAnOnJlbW92ZScpO1xuICAgIH1cblxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
