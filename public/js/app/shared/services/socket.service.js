"use strict";var __decorate=this&&this.__decorate||function(e,t,o,c){var n,r=arguments.length,i=r<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(i=(r<3?n(i):r>3?n(t,o,i):n(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),SocketService=function(){function e(){var e=require("socket-client");this.socket=e.connect("localhost:8000")}return e.prototype.addEventListener=function(e){this.socket.on(e,function(e){console.log("things from socket",e)})},e.prototype.syncUpdates=function(e,t,o){o=o||function(){},this.socket.on(e+":save",function(e){var c=_.find(t,{_id:e._id}),n=t.indexOf(c),r="created";c?(t.splice(n,1,e),r="updated"):t.push(e),o(r,e,t)}),this.socket.on(e+":remove",function(e){var c="deleted";_.remove(t,{_id:e._id}),o(c,e,t)})},e.prototype.unsyncUpdates=function(e){this.socket.removeAllListeners(e+":save"),this.socket.removeAllListeners(e+":remove")},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],e)}();exports.SocketService=SocketService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlZC9zZXJ2aWNlcy9zb2NrZXQuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9zb2NrZXQuc2VydmljZS50cyJdLCJuYW1lcyI6WyJfX2RlY29yYXRlIiwidGhpcyIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiZCIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiaSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJjb3JlXzEiLCJyZXF1aXJlIiwiU29ja2V0U2VydmljZSIsImlvIiwic29ja2V0IiwiY29ubmVjdCIsInByb3RvdHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIm9uIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJzeW5jVXBkYXRlcyIsIm1vZGVsTmFtZSIsImFycmF5IiwiY2IiLCJpdGVtIiwib2xkSXRlbSIsIl8iLCJmaW5kIiwiX2lkIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwicHVzaCIsInJlbW92ZSIsInVuc3luY1VwZGF0ZXMiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJJbmplY3RhYmxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFDQSxJQUFJQSxZQUFjQyxNQUFRQSxLQUFLRCxZQUFlLFNBQVVFLEVBQVlDLEVBQVFDLEVBQUtDLEdBQzdFLEdBQTJIQyxHQUF2SEMsRUFBSUMsVUFBVUMsT0FBUUMsRUFBSUgsRUFBSSxFQUFJSixFQUFrQixPQUFURSxFQUFnQkEsRUFBT00sT0FBT0MseUJBQXlCVCxFQUFRQyxHQUFPQyxDQUNySCxJQUF1QixnQkFBWlEsVUFBb0Qsa0JBQXJCQSxTQUFRQyxTQUF5QkosRUFBSUcsUUFBUUMsU0FBU1osRUFBWUMsRUFBUUMsRUFBS0MsT0FDcEgsS0FBSyxHQUFJVSxHQUFJYixFQUFXTyxPQUFTLEVBQUdNLEdBQUssRUFBR0EsS0FBU1QsRUFBSUosRUFBV2EsTUFBSUwsR0FBS0gsRUFBSSxFQUFJRCxFQUFFSSxHQUFLSCxFQUFJLEVBQUlELEVBQUVILEVBQVFDLEVBQUtNLEdBQUtKLEVBQUVILEVBQVFDLEtBQVNNLEVBQ2hKLE9BQU9ILEdBQUksR0FBS0csR0FBS0MsT0FBT0ssZUFBZWIsRUFBUUMsRUFBS00sR0FBSUEsR0FFNURPLFdBQWNoQixNQUFRQSxLQUFLZ0IsWUFBZSxTQUFVQyxFQUFHQyxHQUN2RCxHQUF1QixnQkFBWk4sVUFBb0Qsa0JBQXJCQSxTQUFRTyxTQUF5QixNQUFPUCxTQUFRTyxTQUFTRixFQUFHQyxJQ1IxR0UsT0FBQUMsUUFBMkIsaUJBSzNCQyxjQUFBLFdBR0MsUUFBQUEsS0FDQyxHQUFNQyxHQUFLRixRQUFRLGdCQUVuQnJCLE1BQUt3QixPQUFTRCxFQUFHRSxRQUFRLGtCQXFEM0IsTUFsRENILEdBQUFJLFVBQUFDLGlCQUFBLFNBQWlCQyxHQUNoQjVCLEtBQUt3QixPQUFPSyxHQUFHRCxFQUFPLFNBQVNFLEdBQzlCQyxRQUFRQyxJQUFJLHFCQUFzQkYsTUFJcENSLEVBQUFJLFVBQUFPLFlBQUEsU0FBWUMsRUFBbUJDLEVBQW1CQyxHQUMzQ0EsRUFBS0EsR0FBTSxhQUtkcEMsS0FBS3dCLE9BQU9LLEdBQUdLLEVBQVksUUFBUyxTQUFVRyxHQUU1QyxHQUFJQyxHQUFVQyxFQUFFQyxLQUFLTCxHQUFRTSxJQUFLSixFQUFLSSxNQUNuQ0MsRUFBUVAsRUFBTVEsUUFBUUwsR0FDdEJWLEVBQVEsU0FJUlUsSUFDRkgsRUFBTVMsT0FBT0YsRUFBTyxFQUFHTCxHQUN2QlQsRUFBUSxXQUVSTyxFQUFNVSxLQUFLUixHQUdiRCxFQUFHUixFQUFPUyxFQUFNRixLQU1sQm5DLEtBQUt3QixPQUFPSyxHQUFHSyxFQUFZLFVBQVcsU0FBVUcsR0FDOUMsR0FBSVQsR0FBUSxTQUNaVyxHQUFFTyxPQUFPWCxHQUFRTSxJQUFLSixFQUFLSSxNQUMzQkwsRUFBR1IsRUFBT1MsRUFBTUYsTUFTbkJiLEVBQUFJLFVBQUFxQixjQUFBLFNBQWNiLEdBQ1ZsQyxLQUFLd0IsT0FBT3dCLG1CQUFtQmQsRUFBWSxTQUMzQ2xDLEtBQUt3QixPQUFPd0IsbUJBQW1CZCxFQUFZLFlBekRuRFosRUFBQXZCLFlBQUNxQixPQUFBNkIsYUQyRE9qQyxXQUFXLHlCQUNaTSxLQzNETTRCLFNBQUE1QixjQUFhQSIsImZpbGUiOiJzaGFyZWQvc2VydmljZXMvc29ja2V0LnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgY29yZV8xID0gcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpO1xuLy8gaW1wb3J0IGlvIGZyb20gJ3NvY2tldC1jbGllbnQnO1xudmFyIFNvY2tldFNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNvY2tldFNlcnZpY2UoKSB7XG4gICAgICAgIHZhciBpbyA9IHJlcXVpcmUoJ3NvY2tldC1jbGllbnQnKTtcbiAgICAgICAgLy8qKiBDaGFuZ2UgdGhpcyBmb3IgcHJvZHVjdGlvblxuICAgICAgICB0aGlzLnNvY2tldCA9IGlvLmNvbm5lY3QoJ2xvY2FsaG9zdDo4MDAwJyk7XG4gICAgfVxuICAgIFNvY2tldFNlcnZpY2UucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQub24oZXZlbnQsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpbmdzIGZyb20gc29ja2V0JywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU29ja2V0U2VydmljZS5wcm90b3R5cGUuc3luY1VwZGF0ZXMgPSBmdW5jdGlvbiAobW9kZWxOYW1lLCBhcnJheSwgY2IpIHtcbiAgICAgICAgY2IgPSBjYiB8fCBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTeW5jcyBpdGVtIGNyZWF0aW9uL3VwZGF0ZXMgb24gJ21vZGVsOnNhdmUnXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNvY2tldC5vbihtb2RlbE5hbWUgKyAnOnNhdmUnLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIG9sZEl0ZW0gPSBfLmZpbmQoYXJyYXksIHsgX2lkOiBpdGVtLl9pZCB9KTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGFycmF5LmluZGV4T2Yob2xkSXRlbSk7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSAnY3JlYXRlZCc7XG4gICAgICAgICAgICAvLyByZXBsYWNlIG9sZEl0ZW0gaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAvLyBvdGhlcndpc2UganVzdCBhZGQgaXRlbSB0byB0aGUgY29sbGVjdGlvblxuICAgICAgICAgICAgaWYgKG9sZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gJ3VwZGF0ZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNiKGV2ZW50LCBpdGVtLCBhcnJheSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3luY3MgcmVtb3ZlZCBpdGVtcyBvbiAnbW9kZWw6cmVtb3ZlJ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb2NrZXQub24obW9kZWxOYW1lICsgJzpyZW1vdmUnLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gJ2RlbGV0ZWQnO1xuICAgICAgICAgICAgXy5yZW1vdmUoYXJyYXksIHsgX2lkOiBpdGVtLl9pZCB9KTtcbiAgICAgICAgICAgIGNiKGV2ZW50LCBpdGVtLCBhcnJheSk7XG4gICAgICAgIH0pO1xuICAgIH07IC8vRW5kIG9mIHN5bmNVcGRhdGVzXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsaXN0ZW5lcnMgZm9yIGEgbW9kZWxzIHVwZGF0ZXMgb24gdGhlIHRoaXMuc29ja2V0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9kZWxOYW1lXG4gICAgICovXG4gICAgU29ja2V0U2VydmljZS5wcm90b3R5cGUudW5zeW5jVXBkYXRlcyA9IGZ1bmN0aW9uIChtb2RlbE5hbWUpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKG1vZGVsTmFtZSArICc6c2F2ZScpO1xuICAgICAgICB0aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMobW9kZWxOYW1lICsgJzpyZW1vdmUnKTtcbiAgICB9O1xuICAgIFNvY2tldFNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgY29yZV8xLkluamVjdGFibGUoKSwgXG4gICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW10pXG4gICAgXSwgU29ja2V0U2VydmljZSk7XG4gICAgcmV0dXJuIFNvY2tldFNlcnZpY2U7XG59KCkpO1xuZXhwb3J0cy5Tb2NrZXRTZXJ2aWNlID0gU29ja2V0U2VydmljZTtcbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbi8vIGltcG9ydCBpbyBmcm9tICdzb2NrZXQtY2xpZW50JztcblxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgU29ja2V0U2VydmljZSB7XG5cdHNvY2tldDogYW55O1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdGNvbnN0IGlvID0gcmVxdWlyZSgnc29ja2V0LWNsaWVudCcpO1xuXHRcdC8vKiogQ2hhbmdlIHRoaXMgZm9yIHByb2R1Y3Rpb25cblx0XHR0aGlzLnNvY2tldCA9IGlvLmNvbm5lY3QoJ2xvY2FsaG9zdDo4MDAwJyk7XG5cdH1cblxuXHRhZGRFdmVudExpc3RlbmVyKGV2ZW50OiBzdHJpbmcpIHtcblx0XHR0aGlzLnNvY2tldC5vbihldmVudCwgZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ3RoaW5ncyBmcm9tIHNvY2tldCcsIGRhdGEpO1xuXHRcdH0pO1xuXHR9XG5cblx0c3luY1VwZGF0ZXMobW9kZWxOYW1lOiBzdHJpbmcsIGFycmF5OiBBcnJheTxhbnk+LCBjYjogYW55KSB7XG4gICAgICAgIGNiID0gY2IgfHwgZnVuY3Rpb24oKXt9O1xuXG5cdCAgICAvKipcblx0ICAgICAqIFN5bmNzIGl0ZW0gY3JlYXRpb24vdXBkYXRlcyBvbiAnbW9kZWw6c2F2ZSdcblx0ICAgICAqL1xuXHQgICAgdGhpcy5zb2NrZXQub24obW9kZWxOYW1lICsgJzpzYXZlJywgZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgXG5cdCAgICAgIHZhciBvbGRJdGVtID0gXy5maW5kKGFycmF5LCB7X2lkOiBpdGVtLl9pZH0pO1xuXHQgICAgICB2YXIgaW5kZXggPSBhcnJheS5pbmRleE9mKG9sZEl0ZW0pO1xuXHQgICAgICB2YXIgZXZlbnQgPSAnY3JlYXRlZCc7XG5cblx0ICAgICAgLy8gcmVwbGFjZSBvbGRJdGVtIGlmIGl0IGV4aXN0c1xuXHQgICAgICAvLyBvdGhlcndpc2UganVzdCBhZGQgaXRlbSB0byB0aGUgY29sbGVjdGlvblxuXHQgICAgICBpZiAob2xkSXRlbSkge1xuXHQgICAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSwgaXRlbSk7XG5cdCAgICAgICAgZXZlbnQgPSAndXBkYXRlZCc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYXJyYXkucHVzaChpdGVtKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGNiKGV2ZW50LCBpdGVtLCBhcnJheSk7XG5cdCAgICB9KTtcblxuXHQgICAgLyoqXG5cdCAgICAgKiBTeW5jcyByZW1vdmVkIGl0ZW1zIG9uICdtb2RlbDpyZW1vdmUnXG5cdCAgICAgKi9cblx0ICAgIHRoaXMuc29ja2V0Lm9uKG1vZGVsTmFtZSArICc6cmVtb3ZlJywgZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgdmFyIGV2ZW50ID0gJ2RlbGV0ZWQnO1xuXHQgICAgICBfLnJlbW92ZShhcnJheSwge19pZDogaXRlbS5faWR9KTtcblx0ICAgICAgY2IoZXZlbnQsIGl0ZW0sIGFycmF5KTtcblx0ICAgIH0pO1xuXHR9Ly9FbmQgb2Ygc3luY1VwZGF0ZXNcblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmVzIGxpc3RlbmVycyBmb3IgYSBtb2RlbHMgdXBkYXRlcyBvbiB0aGUgdGhpcy5zb2NrZXRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gbW9kZWxOYW1lXG4gICAgICAgKi9cbiAgICB1bnN5bmNVcGRhdGVzKG1vZGVsTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycyhtb2RlbE5hbWUgKyAnOnNhdmUnKTtcbiAgICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKG1vZGVsTmFtZSArICc6cmVtb3ZlJyk7XG4gICAgfVxuXG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
