"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),http_1=require("@angular/http"),Observable_1=require("rxjs/Observable");require("rxjs/add/observable/of"),require("rxjs/add/operator/do"),require("rxjs/add/operator/delay"),require("rxjs/add/operator/catch"),require("rxjs/add/operator/map");var SignupService=function(){function e(e){this.http=e,this.isLoggedIn=!1}return e.prototype.signUp=function(e){return this.http.post("/api/user/signup",e).map(this.handelResponse)["catch"](this.handelError)},e.prototype.handelResponse=function(e){console.log("Response when logUserIn @auth.service.ts",e);var t=e.json();return this.isLoggedIn=!0,t||{}},e.prototype.handelError=function(e){return console.log("err when logUserIn @auth.service.ts",e.message),this.isLoggedIn=!1,Observable_1.Observable["throw"](e)},e.prototype.logUserOut=function(){return localStorage.id_token=null,localStorage.current_user=null,this.isLoggedIn=!1,"logout"},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],e)}();exports.SignupService=SignupService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlZC9zZXJ2aWNlcy9zaWdudXAuc2VydmljZS5qcyIsInNoYXJlZC9zZXJ2aWNlcy9zaWdudXAuc2VydmljZS50cyJdLCJuYW1lcyI6WyJfX2RlY29yYXRlIiwidGhpcyIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiZCIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiaSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJjb3JlXzEiLCJyZXF1aXJlIiwiaHR0cF8xIiwiT2JzZXJ2YWJsZV8xIiwiU2lnbnVwU2VydmljZSIsImh0dHAiLCJpc0xvZ2dlZEluIiwicHJvdG90eXBlIiwic2lnblVwIiwiZGF0YSIsInBvc3QiLCJtYXAiLCJoYW5kZWxSZXNwb25zZSIsImhhbmRlbEVycm9yIiwicmVzIiwiY29uc29sZSIsImxvZyIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJPYnNlcnZhYmxlIiwibG9nVXNlck91dCIsImxvY2FsU3RvcmFnZSIsIkluamVjdGFibGUiLCJIdHRwIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFDQSxJQUFJQSxZQUFjQyxNQUFRQSxLQUFLRCxZQUFlLFNBQVVFLEVBQVlDLEVBQVFDLEVBQUtDLEdBQzdFLEdBQTJIQyxHQUF2SEMsRUFBSUMsVUFBVUMsT0FBUUMsRUFBSUgsRUFBSSxFQUFJSixFQUFrQixPQUFURSxFQUFnQkEsRUFBT00sT0FBT0MseUJBQXlCVCxFQUFRQyxHQUFPQyxDQUNySCxJQUF1QixnQkFBWlEsVUFBb0Qsa0JBQXJCQSxTQUFRQyxTQUF5QkosRUFBSUcsUUFBUUMsU0FBU1osRUFBWUMsRUFBUUMsRUFBS0MsT0FDcEgsS0FBSyxHQUFJVSxHQUFJYixFQUFXTyxPQUFTLEVBQUdNLEdBQUssRUFBR0EsS0FBU1QsRUFBSUosRUFBV2EsTUFBSUwsR0FBS0gsRUFBSSxFQUFJRCxFQUFFSSxHQUFLSCxFQUFJLEVBQUlELEVBQUVILEVBQVFDLEVBQUtNLEdBQUtKLEVBQUVILEVBQVFDLEtBQVNNLEVBQ2hKLE9BQU9ILEdBQUksR0FBS0csR0FBS0MsT0FBT0ssZUFBZWIsRUFBUUMsRUFBS00sR0FBSUEsR0FFNURPLFdBQWNoQixNQUFRQSxLQUFLZ0IsWUFBZSxTQUFVQyxFQUFHQyxHQUN2RCxHQUF1QixnQkFBWk4sVUFBb0Qsa0JBQXJCQSxTQUFRTyxTQUF5QixNQUFPUCxTQUFRTyxTQUFTRixFQUFHQyxJQ1IxR0UsT0FBQUMsUUFBMkIsaUJBQzNCQyxPQUFBRCxRQUErQixpQkFDL0JFLGFBQUFGLFFBQTJCLGtCQUUzQkEsU0FBTywwQkFDUEEsUUFBTyx3QkFDUEEsUUFBTywyQkFDUEEsUUFBTywyQkFDUEEsUUFBTyx3QkFRUCxJQUFBRyxlQUFBLFdBSUksUUFBQUEsR0FBbUJDLEdBQUF6QixLQUFBeUIsS0FBQUEsRUFIbkJ6QixLQUFBMEIsWUFBc0IsRUFpQzFCLE1BM0JJRixHQUFBRyxVQUFBQyxPQUFBLFNBQVFDLEdBQ0osTUFBTzdCLE1BQUt5QixLQUFLSyxLQUFLLG1CQUFvQkQsR0FDckNFLElBQUkvQixLQUFLZ0MsZ0JBRFBoQyxTQUVJQSxLQUFLaUMsY0FHWlQsRUFBQUcsVUFBQUssZUFBUixTQUF1QkUsR0FDbkJDLFFBQVFDLElBQUksMkNBQTRDRixFQUV4RCxJQUFJTCxHQUFPSyxFQUFJRyxNQUVmLE9BREFyQyxNQUFLMEIsWUFBYSxFQUNYRyxPQUVITCxFQUFBRyxVQUFBTSxZQUFSLFNBQW9CSyxHQUdoQixNQUZBSCxTQUFRQyxJQUFJLHNDQUF1Q0UsRUFBTUMsU0FDekR2QyxLQUFLMEIsWUFBYSxFQUNYSCxhQUFBaUIsV0FBQWpCLFNBQWlCZSxJQUc1QmQsRUFBQUcsVUFBQWMsV0FBQSxXQUtJLE1BSkFDLGNBQXVCLFNBQUksS0FDM0JBLGFBQTJCLGFBQUksS0FDL0IxQyxLQUFLMEIsWUFBYSxFQUVYLFVBaENmRixFQUFBekIsWUFBQ3FCLE9BQUF1QixhRGtDTzNCLFdBQVcscUJBQXNCTSxPQUFPc0IsUUFDekNwQixLQ2xDTXFCLFNBQUFyQixjQUFhQSIsImZpbGUiOiJzaGFyZWQvc2VydmljZXMvc2lnbnVwLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgY29yZV8xID0gcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpO1xudmFyIGh0dHBfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2h0dHAnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCdyeGpzL09ic2VydmFibGUnKTtcbnJlcXVpcmUoJ3J4anMvYWRkL29ic2VydmFibGUvb2YnKTtcbnJlcXVpcmUoJ3J4anMvYWRkL29wZXJhdG9yL2RvJyk7XG5yZXF1aXJlKCdyeGpzL2FkZC9vcGVyYXRvci9kZWxheScpO1xucmVxdWlyZSgncnhqcy9hZGQvb3BlcmF0b3IvY2F0Y2gnKTtcbnJlcXVpcmUoJ3J4anMvYWRkL29wZXJhdG9yL21hcCcpO1xuLy9UbyBEbzogdHJhY2sgdXNlcnMnIGxvZ2luIHN0YXRlIGFjcm9zcyBhbGwgY29tcG9uZW50XG52YXIgU2lnbnVwU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2lnbnVwU2VydmljZShodHRwKSB7XG4gICAgICAgIHRoaXMuaHR0cCA9IGh0dHA7XG4gICAgICAgIHRoaXMuaXNMb2dnZWRJbiA9IGZhbHNlO1xuICAgIH1cbiAgICBTaWdudXBTZXJ2aWNlLnByb3RvdHlwZS5zaWduVXAgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoJy9hcGkvdXNlci9zaWdudXAnLCBkYXRhKVxuICAgICAgICAgICAgLm1hcCh0aGlzLmhhbmRlbFJlc3BvbnNlKVxuICAgICAgICAgICAgLmNhdGNoKHRoaXMuaGFuZGVsRXJyb3IpO1xuICAgIH07XG4gICAgU2lnbnVwU2VydmljZS5wcm90b3R5cGUuaGFuZGVsUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSB3aGVuIGxvZ1VzZXJJbiBAYXV0aC5zZXJ2aWNlLnRzJywgcmVzKTtcbiAgICAgICAgdmFyIGRhdGEgPSByZXMuanNvbigpO1xuICAgICAgICB0aGlzLmlzTG9nZ2VkSW4gPSB0cnVlO1xuICAgICAgICByZXR1cm4gZGF0YSB8fCB7fTtcbiAgICB9O1xuICAgIFNpZ251cFNlcnZpY2UucHJvdG90eXBlLmhhbmRlbEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnIgd2hlbiBsb2dVc2VySW4gQGF1dGguc2VydmljZS50cycsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmlzTG9nZ2VkSW4gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRocm93KGVycm9yKTtcbiAgICB9O1xuICAgIFNpZ251cFNlcnZpY2UucHJvdG90eXBlLmxvZ1VzZXJPdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZVsnaWRfdG9rZW4nXSA9IG51bGw7XG4gICAgICAgIGxvY2FsU3RvcmFnZVsnY3VycmVudF91c2VyJ10gPSBudWxsO1xuICAgICAgICB0aGlzLmlzTG9nZ2VkSW4gPSBmYWxzZTtcbiAgICAgICAgLy8gYW5kIGJyaW5nIHVzZXIgb3V0IG9mIHRoZSBkYXNoYmFvcmRcbiAgICAgICAgcmV0dXJuICdsb2dvdXQnO1xuICAgIH07XG4gICAgU2lnbnVwU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcbiAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbaHR0cF8xLkh0dHBdKVxuICAgIF0sIFNpZ251cFNlcnZpY2UpO1xuICAgIHJldHVybiBTaWdudXBTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydHMuU2lnbnVwU2VydmljZSA9IFNpZ251cFNlcnZpY2U7XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwLCBSZXNwb25zZSB9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZSc7XG5cbmltcG9ydCAncnhqcy9hZGQvb2JzZXJ2YWJsZS9vZic7XG5pbXBvcnQgJ3J4anMvYWRkL29wZXJhdG9yL2RvJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvZGVsYXknO1xuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9jYXRjaCc7XG5pbXBvcnQgJ3J4anMvYWRkL29wZXJhdG9yL21hcCc7XG5cbmltcG9ydCB7IEF1dGggfSBmcm9tICcuLi90eXBlcy9hdXRoJztcbmltcG9ydCB7IEF1dGhTZXJ2aWNlIH0gZnJvbSAnLi9hdXRoLnNlcnZpY2UnO1xuXG4vL1RvIERvOiB0cmFjayB1c2VycycgbG9naW4gc3RhdGUgYWNyb3NzIGFsbCBjb21wb25lbnRcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFNpZ251cFNlcnZpY2Uge1xuICAgIGlzTG9nZ2VkSW46IGJvb2xlYW4gPSBmYWxzZTtcbiAgICByZWRpcmVjdFVybDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIGh0dHA6IEh0dHApIHsgXG4gICAgfVxuXG4gICAgc2lnblVwIChkYXRhOiBBdXRoKTogT2JzZXJ2YWJsZTxBdXRoPntcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KCcvYXBpL3VzZXIvc2lnbnVwJywgZGF0YSlcbiAgICAgICAgICAgIC5tYXAodGhpcy5oYW5kZWxSZXNwb25zZSlcbiAgICAgICAgICAgIC5jYXRjaCh0aGlzLmhhbmRlbEVycm9yKVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGVsUmVzcG9uc2UocmVzOiBSZXNwb25zZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2Ugd2hlbiBsb2dVc2VySW4gQGF1dGguc2VydmljZS50cycsIHJlcyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgZGF0YSA9IHJlcy5qc29uKClcbiAgICAgICAgdGhpcy5pc0xvZ2dlZEluID0gdHJ1ZVxuICAgICAgICByZXR1cm4gZGF0YSB8fCB7fTtcbiAgICB9XG4gICAgcHJpdmF0ZSBoYW5kZWxFcnJvcihlcnJvcjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnIgd2hlbiBsb2dVc2VySW4gQGF1dGguc2VydmljZS50cycsIGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIHRoaXMuaXNMb2dnZWRJbiA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhlcnJvcik7XG4gICAgfVxuXG4gICAgbG9nVXNlck91dCAoKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZVsnaWRfdG9rZW4nXSA9IG51bGw7XG4gICAgICAgIGxvY2FsU3RvcmFnZVsnY3VycmVudF91c2VyJ10gPSBudWxsO1xuICAgICAgICB0aGlzLmlzTG9nZ2VkSW4gPSBmYWxzZTtcbiAgICAgICAgLy8gYW5kIGJyaW5nIHVzZXIgb3V0IG9mIHRoZSBkYXNoYmFvcmRcbiAgICAgICAgcmV0dXJuICdsb2dvdXQnO1xuICAgIH1cbiAgICBcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
